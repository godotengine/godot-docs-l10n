:github_url: hide

.. Generated automatically by doc/tools/make_rst.py in Godot's source tree.
.. DO NOT EDIT THIS FILE, but the Animation.xml source instead.
.. The source is found in doc/classes or modules/<name>/doc_classes.

.. _class_Animation:

Animation
=========

**Inherits:** :ref:`Resource<class_Resource>` **<** :ref:`Reference<class_Reference>` **<** :ref:`Object<class_Object>`

包含用于对引擎中所有内容进行动画处理的数据。

描述
----

Animation 资源包含对引擎中的内容进行动画所需的数据。动画被划分为轨道，每个轨道必须与一个节点相连。通过向轨道添加时间键（事件），节点的状态可以随时间改变。

::

    # 这将创建一个动画，使节点“Enemy”向右移动
    # 在 0.5 秒内移动 100 像素。
    var animation = Animation.new()
    var track_index = animation.add_track(Animation.TYPE_VALUE)
    animation.track_set_path(track_index, "Enemy:position:x")
    animation.track_insert_key(track_index, 0.0, 0)
    animation.track_insert_key(track_index, 0.5, 100)

动画只是数据容器，必须添加到 :ref:`AnimationPlayer<class_AnimationPlayer>` 或 :ref:`AnimationTreePlayer<class_AnimationTreePlayer>` 等节点上才能播放。动画轨道有不同的类型，每个都有自己的一套专用方法。参阅 :ref:`TrackType<enum_Animation_TrackType>` 查看可用类型。

教程
----

- :doc:`../tutorials/animation/index`

属性
----

+---------------------------+------------------------------------------------+-----------+
| :ref:`float<class_float>` | :ref:`length<class_Animation_property_length>` | ``1.0``   |
+---------------------------+------------------------------------------------+-----------+
| :ref:`bool<class_bool>`   | :ref:`loop<class_Animation_property_loop>`     | ``false`` |
+---------------------------+------------------------------------------------+-----------+
| :ref:`float<class_float>` | :ref:`step<class_Animation_property_step>`     | ``0.1``   |
+---------------------------+------------------------------------------------+-----------+

方法
----

+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                                      | :ref:`add_track<class_Animation_method_add_track>` **(** :ref:`TrackType<enum_Animation_TrackType>` type, :ref:`int<class_int>` at_position=-1 **)**                                                                                                                                                           |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>`                                | :ref:`animation_track_get_key_animation<class_Animation_method_animation_track_get_key_animation>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                          |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                                      | :ref:`animation_track_insert_key<class_Animation_method_animation_track_insert_key>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`String<class_String>` animation **)**                                                                                                        |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`animation_track_set_key_animation<class_Animation_method_animation_track_set_key_animation>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`String<class_String>` animation **)**                                                                                           |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`float<class_float>`                                  | :ref:`audio_track_get_key_end_offset<class_Animation_method_audio_track_get_key_end_offset>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                                |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`float<class_float>`                                  | :ref:`audio_track_get_key_start_offset<class_Animation_method_audio_track_get_key_start_offset>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                            |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Resource<class_Resource>`                            | :ref:`audio_track_get_key_stream<class_Animation_method_audio_track_get_key_stream>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                                        |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                                      | :ref:`audio_track_insert_key<class_Animation_method_audio_track_insert_key>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`Resource<class_Resource>` stream, :ref:`float<class_float>` start_offset=0, :ref:`float<class_float>` end_offset=0 **)**                             |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`audio_track_set_key_end_offset<class_Animation_method_audio_track_set_key_end_offset>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`float<class_float>` offset **)**                                                                                                      |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`audio_track_set_key_start_offset<class_Animation_method_audio_track_set_key_start_offset>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`float<class_float>` offset **)**                                                                                                  |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`audio_track_set_key_stream<class_Animation_method_audio_track_set_key_stream>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`Resource<class_Resource>` stream **)**                                                                                                        |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Vector2<class_Vector2>`                              | :ref:`bezier_track_get_key_in_handle<class_Animation_method_bezier_track_get_key_in_handle>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                                |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Vector2<class_Vector2>`                              | :ref:`bezier_track_get_key_out_handle<class_Animation_method_bezier_track_get_key_out_handle>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                              |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`float<class_float>`                                  | :ref:`bezier_track_get_key_value<class_Animation_method_bezier_track_get_key_value>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                                        |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                                      | :ref:`bezier_track_insert_key<class_Animation_method_bezier_track_insert_key>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`float<class_float>` value, :ref:`Vector2<class_Vector2>` in_handle=Vector2( 0, 0 ), :ref:`Vector2<class_Vector2>` out_handle=Vector2( 0, 0 ) **)** |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`float<class_float>`                                  | :ref:`bezier_track_interpolate<class_Animation_method_bezier_track_interpolate>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time **)** |const|                                                                                                                                           |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`bezier_track_set_key_in_handle<class_Animation_method_bezier_track_set_key_in_handle>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`Vector2<class_Vector2>` in_handle **)**                                                                                               |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`bezier_track_set_key_out_handle<class_Animation_method_bezier_track_set_key_out_handle>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`Vector2<class_Vector2>` out_handle **)**                                                                                            |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`bezier_track_set_key_value<class_Animation_method_bezier_track_set_key_value>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`float<class_float>` value **)**                                                                                                               |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`clear<class_Animation_method_clear>` **(** **)**                                                                                                                                                                                                                                                         |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`copy_track<class_Animation_method_copy_track>` **(** :ref:`int<class_int>` track_idx, :ref:`Animation<class_Animation>` to_animation **)**                                                                                                                                                               |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                                      | :ref:`find_track<class_Animation_method_find_track>` **(** :ref:`NodePath<class_NodePath>` path **)** |const|                                                                                                                                                                                                  |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                                      | :ref:`get_track_count<class_Animation_method_get_track_count>` **(** **)** |const|                                                                                                                                                                                                                             |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`PoolIntArray<class_PoolIntArray>`                    | :ref:`method_track_get_key_indices<class_Animation_method_method_track_get_key_indices>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time_sec, :ref:`float<class_float>` delta **)** |const|                                                                                              |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>`                                | :ref:`method_track_get_name<class_Animation_method_method_track_get_name>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                                                  |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Array<class_Array>`                                  | :ref:`method_track_get_params<class_Animation_method_method_track_get_params>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                                              |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`remove_track<class_Animation_method_remove_track>` **(** :ref:`int<class_int>` track_idx **)**                                                                                                                                                                                                           |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                                      | :ref:`track_find_key<class_Animation_method_track_find_key>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`bool<class_bool>` exact=false **)** |const|                                                                                                                          |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`bool<class_bool>`                                    | :ref:`track_get_interpolation_loop_wrap<class_Animation_method_track_get_interpolation_loop_wrap>` **(** :ref:`int<class_int>` track_idx **)** |const|                                                                                                                                                         |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`InterpolationType<enum_Animation_InterpolationType>` | :ref:`track_get_interpolation_type<class_Animation_method_track_get_interpolation_type>` **(** :ref:`int<class_int>` track_idx **)** |const|                                                                                                                                                                   |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                                      | :ref:`track_get_key_count<class_Animation_method_track_get_key_count>` **(** :ref:`int<class_int>` track_idx **)** |const|                                                                                                                                                                                     |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`float<class_float>`                                  | :ref:`track_get_key_time<class_Animation_method_track_get_key_time>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                                                        |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`float<class_float>`                                  | :ref:`track_get_key_transition<class_Animation_method_track_get_key_transition>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                                            |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Variant<class_Variant>`                              | :ref:`track_get_key_value<class_Animation_method_track_get_key_value>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|                                                                                                                                                      |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`NodePath<class_NodePath>`                            | :ref:`track_get_path<class_Animation_method_track_get_path>` **(** :ref:`int<class_int>` track_idx **)** |const|                                                                                                                                                                                               |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`TrackType<enum_Animation_TrackType>`                 | :ref:`track_get_type<class_Animation_method_track_get_type>` **(** :ref:`int<class_int>` track_idx **)** |const|                                                                                                                                                                                               |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`track_insert_key<class_Animation_method_track_insert_key>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`Variant<class_Variant>` key, :ref:`float<class_float>` transition=1 **)**                                                                                        |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`bool<class_bool>`                                    | :ref:`track_is_enabled<class_Animation_method_track_is_enabled>` **(** :ref:`int<class_int>` track_idx **)** |const|                                                                                                                                                                                           |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`bool<class_bool>`                                    | :ref:`track_is_imported<class_Animation_method_track_is_imported>` **(** :ref:`int<class_int>` track_idx **)** |const|                                                                                                                                                                                         |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`track_move_down<class_Animation_method_track_move_down>` **(** :ref:`int<class_int>` track_idx **)**                                                                                                                                                                                                     |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`track_move_to<class_Animation_method_track_move_to>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` to_idx **)**                                                                                                                                                                           |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`track_move_up<class_Animation_method_track_move_up>` **(** :ref:`int<class_int>` track_idx **)**                                                                                                                                                                                                         |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`track_remove_key<class_Animation_method_track_remove_key>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)**                                                                                                                                                                    |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`track_remove_key_at_position<class_Animation_method_track_remove_key_at_position>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` position **)**                                                                                                                                       |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`track_set_enabled<class_Animation_method_track_set_enabled>` **(** :ref:`int<class_int>` track_idx, :ref:`bool<class_bool>` enabled **)**                                                                                                                                                                |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`track_set_imported<class_Animation_method_track_set_imported>` **(** :ref:`int<class_int>` track_idx, :ref:`bool<class_bool>` imported **)**                                                                                                                                                             |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`track_set_interpolation_loop_wrap<class_Animation_method_track_set_interpolation_loop_wrap>` **(** :ref:`int<class_int>` track_idx, :ref:`bool<class_bool>` interpolation **)**                                                                                                                          |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`track_set_interpolation_type<class_Animation_method_track_set_interpolation_type>` **(** :ref:`int<class_int>` track_idx, :ref:`InterpolationType<enum_Animation_InterpolationType>` interpolation **)**                                                                                                 |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`track_set_key_time<class_Animation_method_track_set_key_time>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`float<class_float>` time **)**                                                                                                                                |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`track_set_key_transition<class_Animation_method_track_set_key_transition>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`float<class_float>` transition **)**                                                                                                              |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`track_set_key_value<class_Animation_method_track_set_key_value>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key, :ref:`Variant<class_Variant>` value **)**                                                                                                                             |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`track_set_path<class_Animation_method_track_set_path>` **(** :ref:`int<class_int>` track_idx, :ref:`NodePath<class_NodePath>` path **)**                                                                                                                                                                 |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`track_swap<class_Animation_method_track_swap>` **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` with_idx **)**                                                                                                                                                                               |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                                      | :ref:`transform_track_insert_key<class_Animation_method_transform_track_insert_key>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`Vector3<class_Vector3>` location, :ref:`Quat<class_Quat>` rotation, :ref:`Vector3<class_Vector3>` scale **)**                                |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Array<class_Array>`                                  | :ref:`transform_track_interpolate<class_Animation_method_transform_track_interpolate>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time_sec **)** |const|                                                                                                                                 |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`PoolIntArray<class_PoolIntArray>`                    | :ref:`value_track_get_key_indices<class_Animation_method_value_track_get_key_indices>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time_sec, :ref:`float<class_float>` delta **)** |const|                                                                                                |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`UpdateMode<enum_Animation_UpdateMode>`               | :ref:`value_track_get_update_mode<class_Animation_method_value_track_get_update_mode>` **(** :ref:`int<class_int>` track_idx **)** |const|                                                                                                                                                                     |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Variant<class_Variant>`                              | :ref:`value_track_interpolate<class_Animation_method_value_track_interpolate>` **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time_sec **)** |const|                                                                                                                                         |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                                       | :ref:`value_track_set_update_mode<class_Animation_method_value_track_set_update_mode>` **(** :ref:`int<class_int>` track_idx, :ref:`UpdateMode<enum_Animation_UpdateMode>` mode **)**                                                                                                                          |
+------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

信号
----

.. _class_Animation_signal_tracks_changed:

- **tracks_changed** **(** **)**

当轨道列表发生变化时发出，例如轨道被添加、移动或改变路径。

枚举
----

.. _enum_Animation_TrackType:

.. _class_Animation_constant_TYPE_VALUE:

.. _class_Animation_constant_TYPE_TRANSFORM:

.. _class_Animation_constant_TYPE_METHOD:

.. _class_Animation_constant_TYPE_BEZIER:

.. _class_Animation_constant_TYPE_AUDIO:

.. _class_Animation_constant_TYPE_ANIMATION:

enum **TrackType**:

- **TYPE_VALUE** = **0** --- 值跟踪节点属性中的设置值，但只跟踪那些可以插值的值。

- **TYPE_TRANSFORM** = **1** --- 变换轨迹用于改变节点局部变换或骨架姿势骨架。转变是插值的。

- **TYPE_METHOD** = **2** --- 方法跟踪每个键给定参数的调用函数。

- **TYPE_BEZIER** = **3** --- Bezier轨迹用于使用自定义曲线对数值进行插值。它们也可以用来对向量和颜色的子属性进行动画处理（例如\ :ref:`Color<class_Color>`\ 的alpha值）。

- **TYPE_AUDIO** = **4** --- 音频轨道可以用来通过任意类型的 :ref:`AudioStreamPlayer<class_AudioStreamPlayer>` 播放音频流。该流可以在动画中进行修剪和预览。

- **TYPE_ANIMATION** = **5** --- 动画曲目在其他 :ref:`AnimationPlayer<class_AnimationPlayer>` 节点中播放动画。

----

.. _enum_Animation_InterpolationType:

.. _class_Animation_constant_INTERPOLATION_NEAREST:

.. _class_Animation_constant_INTERPOLATION_LINEAR:

.. _class_Animation_constant_INTERPOLATION_CUBIC:

enum **InterpolationType**:

- **INTERPOLATION_NEAREST** = **0** --- 无内插(最近值)。

- **INTERPOLATION_LINEAR** = **1** --- 线性插值.

- **INTERPOLATION_CUBIC** = **2** --- 三次插值.

----

.. _enum_Animation_UpdateMode:

.. _class_Animation_constant_UPDATE_CONTINUOUS:

.. _class_Animation_constant_UPDATE_DISCRETE:

.. _class_Animation_constant_UPDATE_TRIGGER:

.. _class_Animation_constant_UPDATE_CAPTURE:

enum **UpdateMode**:

- **UPDATE_CONTINUOUS** = **0** --- 在关键帧之间更新。

- **UPDATE_DISCRETE** = **1** --- 在关键帧更新并保持数值。

- **UPDATE_TRIGGER** = **2** --- 在关键帧更新。

- **UPDATE_CAPTURE** = **3** --- 与线性插值相同，但如果第一个键不是在0秒时，也会从当前值进行插值（即在运行时动态插值）。

属性说明
--------

.. _class_Animation_property_length:

- :ref:`float<class_float>` **length**

+-----------+-------------------+
| *Default* | ``1.0``           |
+-----------+-------------------+
| *Setter*  | set_length(value) |
+-----------+-------------------+
| *Getter*  | get_length()      |
+-----------+-------------------+

动画的总长度（单位：秒）。

\ **注意：**\ 长度不以最后一个键为界，因为这个键可能在结束前或结束后，以确保正确的插值和循环。

----

.. _class_Animation_property_loop:

- :ref:`bool<class_bool>` **loop**

+-----------+-----------------+
| *Default* | ``false``       |
+-----------+-----------------+
| *Setter*  | set_loop(value) |
+-----------+-----------------+
| *Getter*  | has_loop()      |
+-----------+-----------------+

指示动画必须循环的标志。这用于动画循环正确插值，以及提示播放器须重新启动动画。

----

.. _class_Animation_property_step:

- :ref:`float<class_float>` **step**

+-----------+-----------------+
| *Default* | ``0.1``         |
+-----------+-----------------+
| *Setter*  | set_step(value) |
+-----------+-----------------+
| *Getter*  | get_step()      |
+-----------+-----------------+

动画步长值。

方法说明
--------

.. _class_Animation_method_add_track:

- :ref:`int<class_int>` **add_track** **(** :ref:`TrackType<enum_Animation_TrackType>` type, :ref:`int<class_int>` at_position=-1 **)**

向动画添加轨道。

----

.. _class_Animation_method_animation_track_get_key_animation:

- :ref:`String<class_String>` **animation_track_get_key_animation** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回由 ``key_idx``\ 标识的键处的动画名称。 ``track_idx``\ 必须是动画轨道的索引。

----

.. _class_Animation_method_animation_track_insert_key:

- :ref:`int<class_int>` **animation_track_insert_key** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`String<class_String>` animation **)**

在给定的\ ``time``\ （以秒为单位）中插入值\ ``animation``\ 的键。 ``track_idx``\ 必须是动画轨道的索引。

----

.. _class_Animation_method_animation_track_set_key_animation:

- void **animation_track_set_key_animation** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`String<class_String>` animation **)**

将 ``key_idx`` 所标识的键设置为 ``animation`` 的值。\ ``track_idx`` 必须是动画轨道的索引。

----

.. _class_Animation_method_audio_track_get_key_end_offset:

- :ref:`float<class_float>` **audio_track_get_key_end_offset** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回由 ``key_idx`` 标识的键的结束偏移量。\ ``track_idx`` 必须是音频轨道的索引。

结束偏移是音频流末尾截断的秒数。

----

.. _class_Animation_method_audio_track_get_key_start_offset:

- :ref:`float<class_float>` **audio_track_get_key_start_offset** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回由 ``key_idx`` 标识的键的起始偏移量。\ ``track_idx`` 必须是音频轨道的索引。

起始偏移量是音频流开头截断的秒数。

----

.. _class_Animation_method_audio_track_get_key_stream:

- :ref:`Resource<class_Resource>` **audio_track_get_key_stream** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回由 ``key_idx`` 标识的键的音频流。\ ``track_idx`` 必须是音频轨道的索引。

----

.. _class_Animation_method_audio_track_insert_key:

- :ref:`int<class_int>` **audio_track_insert_key** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`Resource<class_Resource>` stream, :ref:`float<class_float>` start_offset=0, :ref:`float<class_float>` end_offset=0 **)**

在 ``time`` 秒处插入音频轨道关键帧。\ ``track_idx`` 必须是音频轨道的索引。

\ ``stream`` 是要播放的 :ref:`AudioStream<class_AudioStream>` 资源。\ ``start_offset`` 是在音频流的开头截断的秒数，而 ``end_offset`` 则是在结尾的截断。

----

.. _class_Animation_method_audio_track_set_key_end_offset:

- void **audio_track_set_key_end_offset** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`float<class_float>` offset **)**

将由 ``key_idx`` 标识的关键帧的结束偏移设置为值 ``offset``\ 。参数 ``track_idx`` 必须是音频轨道的索引。

----

.. _class_Animation_method_audio_track_set_key_start_offset:

- void **audio_track_set_key_start_offset** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`float<class_float>` offset **)**

将由 ``key_idx`` 确定的关键帧的起始偏移量设置为 ``offset``\ 。参数 ``track_idx`` 必须是音频轨道的索引。

----

.. _class_Animation_method_audio_track_set_key_stream:

- void **audio_track_set_key_stream** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`Resource<class_Resource>` stream **)**

将 ``key_idx`` 所标识的键流设置为\ ``stream``\ 值。\ ``track_idx``\ 必须是一个音频轨道的索引。

----

.. _class_Animation_method_bezier_track_get_key_in_handle:

- :ref:`Vector2<class_Vector2>` **bezier_track_get_key_in_handle** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回由 ``key_idx`` 识别的键的输入句柄， ``track_idx`` 必须是 Bezier轨道的索引。

----

.. _class_Animation_method_bezier_track_get_key_out_handle:

- :ref:`Vector2<class_Vector2>` **bezier_track_get_key_out_handle** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回由 ``key_idx`` 识别的键的输出句柄， ``track_idx`` 必须是 Bezier轨道的索引。

----

.. _class_Animation_method_bezier_track_get_key_value:

- :ref:`float<class_float>` **bezier_track_get_key_value** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回由 ``key_idx`` 识别的键的值， ``track_idx`` 必须是 Bezier轨道的索引。

----

.. _class_Animation_method_bezier_track_insert_key:

- :ref:`int<class_int>` **bezier_track_insert_key** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`float<class_float>` value, :ref:`Vector2<class_Vector2>` in_handle=Vector2( 0, 0 ), :ref:`Vector2<class_Vector2>` out_handle=Vector2( 0, 0 ) **)**

在给定的\ ``时间``\ 插入一个贝塞尔轨道键，单位为秒。\ ``track_idx`` 必须是 Bezier轨道的索引。

\ ``in_handle``\ 是添加的Bezier曲线点的左侧权重，\ ``out_handle``\ 是右侧权重，而\ ``value``\ 是这个点的实际值。

----

.. _class_Animation_method_bezier_track_interpolate:

- :ref:`float<class_float>` **bezier_track_interpolate** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time **)** |const|

返回给定 ``time``\ 处的插值（以秒为单位）。 ``track_idx``\ 必须是 Bezier轨道的索引。

----

.. _class_Animation_method_bezier_track_set_key_in_handle:

- void **bezier_track_set_key_in_handle** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`Vector2<class_Vector2>` in_handle **)**

将 ``key_idx`` 所标识的键的 in handle 设置为 ``in_handle`` 值。\ ``track_idx`` 必须是 Bezier轨道的索引。

----

.. _class_Animation_method_bezier_track_set_key_out_handle:

- void **bezier_track_set_key_out_handle** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`Vector2<class_Vector2>` out_handle **)**

将由 ``key_idx`` 确定的关键帧的输出柄设置为 ``out_handle`` 。参数 ``track_idx`` 必须是贝塞尔曲线轨道的索引。

----

.. _class_Animation_method_bezier_track_set_key_value:

- void **bezier_track_set_key_value** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`float<class_float>` value **)**

将 ``key_idx`` 所标识的键值设置为给定值。\ ``track_idx``\ 必须是 Bezier轨道的索引。

----

.. _class_Animation_method_clear:

- void **clear** **(** **)**

清除动画（清除所有轨道并重置所有）。

----

.. _class_Animation_method_copy_track:

- void **copy_track** **(** :ref:`int<class_int>` track_idx, :ref:`Animation<class_Animation>` to_animation **)**

从\ ``to_animation``\ 中添加一个新的轨道，它是给定轨道的副本。

----

.. _class_Animation_method_find_track:

- :ref:`int<class_int>` **find_track** **(** :ref:`NodePath<class_NodePath>` path **)** |const|

返回指定轨迹的索引。如果没有找到，返回-1。

----

.. _class_Animation_method_get_track_count:

- :ref:`int<class_int>` **get_track_count** **(** **)** |const|

返回动画中的曲目量。

----

.. _class_Animation_method_method_track_get_key_indices:

- :ref:`PoolIntArray<class_PoolIntArray>` **method_track_get_key_indices** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time_sec, :ref:`float<class_float>` delta **)** |const|

返回给定位置和delta时间的方法轨迹的所有关键指数。

----

.. _class_Animation_method_method_track_get_name:

- :ref:`String<class_String>` **method_track_get_name** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回一个方法轨迹的方法名。

----

.. _class_Animation_method_method_track_get_params:

- :ref:`Array<class_Array>` **method_track_get_params** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回给定轨道中给定键的方法轨道上要调用的参数值。

----

.. _class_Animation_method_remove_track:

- void **remove_track** **(** :ref:`int<class_int>` track_idx **)**

通过指定轨迹索引来删除一个轨迹。

----

.. _class_Animation_method_track_find_key:

- :ref:`int<class_int>` **track_find_key** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`bool<class_bool>` exact=false **)** |const|

按时间查找给定轨迹中的关键索引。也可选择只在给定准确时间的情况下查找。

----

.. _class_Animation_method_track_get_interpolation_loop_wrap:

- :ref:`bool<class_bool>` **track_get_interpolation_loop_wrap** **(** :ref:`int<class_int>` track_idx **)** |const|

如果 ``idx`` 处的轨迹包住了内插循环，则返回 ``true``\ 。新的轨迹默认会包住内插循环。

----

.. _class_Animation_method_track_get_interpolation_type:

- :ref:`InterpolationType<enum_Animation_InterpolationType>` **track_get_interpolation_type** **(** :ref:`int<class_int>` track_idx **)** |const|

返回给定轨迹的插值类型。

----

.. _class_Animation_method_track_get_key_count:

- :ref:`int<class_int>` **track_get_key_count** **(** :ref:`int<class_int>` track_idx **)** |const|

返回指定轨道中的键数。

----

.. _class_Animation_method_track_get_key_time:

- :ref:`float<class_float>` **track_get_key_time** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回钥匙所在的时间。

----

.. _class_Animation_method_track_get_key_transition:

- :ref:`float<class_float>` **track_get_key_transition** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回特定键的过渡曲线（缓动）（参阅内置数学函数\ :ref:`@GDScript.ease<class_@GDScript_method_ease>`\ ）。

----

.. _class_Animation_method_track_get_key_value:

- :ref:`Variant<class_Variant>` **track_get_key_value** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)** |const|

返回给定轨道中给定键的值。

----

.. _class_Animation_method_track_get_path:

- :ref:`NodePath<class_NodePath>` **track_get_path** **(** :ref:`int<class_int>` track_idx **)** |const|

获取轨迹的路径。有关路径格式的详细信息，请参阅\ :ref:`track_set_path<class_Animation_method_track_set_path>`\ 。

----

.. _class_Animation_method_track_get_type:

- :ref:`TrackType<enum_Animation_TrackType>` **track_get_type** **(** :ref:`int<class_int>` track_idx **)** |const|

获取轨道的类型。

----

.. _class_Animation_method_track_insert_key:

- void **track_insert_key** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`Variant<class_Variant>` key, :ref:`float<class_float>` transition=1 **)**

在指定的轨道中插入一个通用键。

----

.. _class_Animation_method_track_is_enabled:

- :ref:`bool<class_bool>` **track_is_enabled** **(** :ref:`int<class_int>` track_idx **)** |const|

如果启用了索引\ ``idx``\ 处的轨迹，则返回\ ``true``\ 。

----

.. _class_Animation_method_track_is_imported:

- :ref:`bool<class_bool>` **track_is_imported** **(** :ref:`int<class_int>` track_idx **)** |const|

如果给定的轨迹被导入，返回\ ``true``\ 。否则，返回\ ``false``\ 。

----

.. _class_Animation_method_track_move_down:

- void **track_move_down** **(** :ref:`int<class_int>` track_idx **)**

将轨道下移。

----

.. _class_Animation_method_track_move_to:

- void **track_move_to** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` to_idx **)**

将轨道 ``idx`` 的索引位置改为 ``to_idx`` 中定义的位置。

----

.. _class_Animation_method_track_move_up:

- void **track_move_up** **(** :ref:`int<class_int>` track_idx **)**

将轨道上移。

----

.. _class_Animation_method_track_remove_key:

- void **track_remove_key** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx **)**

在指定的轨道上按索引删除一个键。

----

.. _class_Animation_method_track_remove_key_at_position:

- void **track_remove_key_at_position** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` position **)**

按位置（秒）删除指定轨道中的键。

----

.. _class_Animation_method_track_set_enabled:

- void **track_set_enabled** **(** :ref:`int<class_int>` track_idx, :ref:`bool<class_bool>` enabled **)**

启用/禁用指定的轨道。曲目默认为启用。

----

.. _class_Animation_method_track_set_imported:

- void **track_set_imported** **(** :ref:`int<class_int>` track_idx, :ref:`bool<class_bool>` imported **)**

将指定的轨道设置为导入或不导入。

----

.. _class_Animation_method_track_set_interpolation_loop_wrap:

- void **track_set_interpolation_loop_wrap** **(** :ref:`int<class_int>` track_idx, :ref:`bool<class_bool>` interpolation **)**

如果\ ``true``\ ，则\ ``idx``\ 处的轨迹包住插值循环。

----

.. _class_Animation_method_track_set_interpolation_type:

- void **track_set_interpolation_type** **(** :ref:`int<class_int>` track_idx, :ref:`InterpolationType<enum_Animation_InterpolationType>` interpolation **)**

设置指定轨道的内插类型。

----

.. _class_Animation_method_track_set_key_time:

- void **track_set_key_time** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`float<class_float>` time **)**

设置现有键的时间。

----

.. _class_Animation_method_track_set_key_transition:

- void **track_set_key_transition** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key_idx, :ref:`float<class_float>` transition **)**

设置特定键的过渡曲线（缓动）（参阅内置数学函数\ :ref:`@GDScript.ease<class_@GDScript_method_ease>`\ ）。

----

.. _class_Animation_method_track_set_key_value:

- void **track_set_key_value** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` key, :ref:`Variant<class_Variant>` value **)**

设置现有键的值。

----

.. _class_Animation_method_track_set_path:

- void **track_set_path** **(** :ref:`int<class_int>` track_idx, :ref:`NodePath<class_NodePath>` path **)**

设置轨道的路径。路径必须是指向节点场景树的有效路径，必须从将要实现动画的节点的父节点开始指定。控件属性或骨骼的轨道必须在路径后面加上它们的名字，用\ ``":"``\ 分隔。

例如，\ ``"character/skeleton:ankle"`` 或\ ``"character/mesh:transform/local"`` 。

----

.. _class_Animation_method_track_swap:

- void **track_swap** **(** :ref:`int<class_int>` track_idx, :ref:`int<class_int>` with_idx **)**

将轨道 ``idx`` 的索引位置与轨道 ``with_idx`` 的索引位置互换。

----

.. _class_Animation_method_transform_track_insert_key:

- :ref:`int<class_int>` **transform_track_insert_key** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time, :ref:`Vector3<class_Vector3>` location, :ref:`Quat<class_Quat>` rotation, :ref:`Vector3<class_Vector3>` scale **)**

为变换轨道插入变换键。

----

.. _class_Animation_method_transform_track_interpolate:

- :ref:`Array<class_Array>` **transform_track_interpolate** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time_sec **)** |const|

返回给定时间内变换轨迹的插值（以秒为单位）。由3个元素组成的数组：position（位置）(:ref:`Vector3<class_Vector3>`)、rotation（旋转）(:ref:`Quat<class_Quat>`)、 scale（缩放）(:ref:`Vector3<class_Vector3>`)。

----

.. _class_Animation_method_value_track_get_key_indices:

- :ref:`PoolIntArray<class_PoolIntArray>` **value_track_get_key_indices** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time_sec, :ref:`float<class_float>` delta **)** |const|

返回给定位置和delta时间的价值轨迹的所有关键指数。

----

.. _class_Animation_method_value_track_get_update_mode:

- :ref:`UpdateMode<enum_Animation_UpdateMode>` **value_track_get_update_mode** **(** :ref:`int<class_int>` track_idx **)** |const|

返回值跟踪的更新模式。

----

.. _class_Animation_method_value_track_interpolate:

- :ref:`Variant<class_Variant>` **value_track_interpolate** **(** :ref:`int<class_int>` track_idx, :ref:`float<class_float>` time_sec **)** |const|

返回给定时间处（以秒为单位）的插值。\ ``track_idx``\ 必须是一个值轨道的索引。

----

.. _class_Animation_method_value_track_set_update_mode:

- void **value_track_set_update_mode** **(** :ref:`int<class_int>` track_idx, :ref:`UpdateMode<enum_Animation_UpdateMode>` mode **)**

设置值跟踪的更新模式（参阅\ :ref:`UpdateMode<enum_Animation_UpdateMode>`\ ）。

.. |virtual| replace:: :abbr:`virtual (This method should typically be overridden by the user to have any effect.)`
.. |const| replace:: :abbr:`const (This method has no side effects. It doesn't modify any of the instance's member variables.)`
.. |vararg| replace:: :abbr:`vararg (This method accepts any number of arguments after the ones described here.)`
