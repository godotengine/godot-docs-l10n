:github_url: hide

.. Generated automatically by doc/tools/make_rst.py in Godot's source tree.
.. DO NOT EDIT THIS FILE, but the EditorVCSInterface.xml source instead.
.. The source is found in doc/classes or modules/<name>/doc_classes.

.. _class_EditorVCSInterface:

EditorVCSInterface
==================

**Inherits:** :ref:`Object<class_Object>`

版本控制系统(VCS)接口，可对正在使用的本地VCS进行读写。

描述
----

由编辑器用来在编辑器中显示VCS提取的信息。这个API的实现包含在VCS附加组件中，这些附加组件本质上是GDNative插件，需要放到项目文件夹中。这些VCS附加组件是脚本，它们（按需）附加到\ ``EditorVCSInterface``\ 的对象实例中。下面列出的所有功能，它们不是自己执行任务，而是调用VCS附加组件中内部定义的功能，以提供现写现用的体验。

方法
----

+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| void                                | :ref:`commit<class_EditorVCSInterface_method_commit>` **(** :ref:`String<class_String>` msg **)**                       |
+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| :ref:`Array<class_Array>`           | :ref:`get_file_diff<class_EditorVCSInterface_method_get_file_diff>` **(** :ref:`String<class_String>` file_path **)**   |
+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| :ref:`Dictionary<class_Dictionary>` | :ref:`get_modified_files_data<class_EditorVCSInterface_method_get_modified_files_data>` **(** **)**                     |
+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>`         | :ref:`get_project_name<class_EditorVCSInterface_method_get_project_name>` **(** **)**                                   |
+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>`         | :ref:`get_vcs_name<class_EditorVCSInterface_method_get_vcs_name>` **(** **)**                                           |
+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| :ref:`bool<class_bool>`             | :ref:`initialize<class_EditorVCSInterface_method_initialize>` **(** :ref:`String<class_String>` project_root_path **)** |
+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| :ref:`bool<class_bool>`             | :ref:`is_addon_ready<class_EditorVCSInterface_method_is_addon_ready>` **(** **)**                                       |
+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| :ref:`bool<class_bool>`             | :ref:`is_vcs_initialized<class_EditorVCSInterface_method_is_vcs_initialized>` **(** **)**                               |
+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| :ref:`bool<class_bool>`             | :ref:`shut_down<class_EditorVCSInterface_method_shut_down>` **(** **)**                                                 |
+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| void                                | :ref:`stage_file<class_EditorVCSInterface_method_stage_file>` **(** :ref:`String<class_String>` file_path **)**         |
+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------+
| void                                | :ref:`unstage_file<class_EditorVCSInterface_method_unstage_file>` **(** :ref:`String<class_String>` file_path **)**     |
+-------------------------------------+-------------------------------------------------------------------------------------------------------------------------+

方法说明
--------

.. _class_EditorVCSInterface_method_commit:

- void **commit** **(** :ref:`String<class_String>` msg **)**

如果add-on已经初始化，则创建一个版本提交，否则不做任何事情就返回。使用之前暂存的文件，提交信息设置为参数中提供的值。

----

.. _class_EditorVCSInterface_method_get_file_diff:

- :ref:`Array<class_Array>` **get_file_diff** **(** :ref:`String<class_String>` file_path **)**

如果VCS addon被初始化，返回一个\ :ref:`Array<class_Array>`\ 的\ :ref:`Dictionary<class_Dictionary>`\ 对象，包含正在使用的VCS的diff输出，否则返回一个空\ :ref:`Array<class_Array>`\ 对象。diff内容还包括一些上下文，这些上下文行为文件中观察到的行变化提供上下文。

每个\ :ref:`Dictionary<class_Dictionary>`\ 对象的键下都有行差内容。

- ``"content"``\ 存储一个包含行内容的\ :ref:`String<class_String>`\ 。

- ``"status"``\ 存储一个\ :ref:`String<class_String>`\ ，如果内容是添加行，则包含\ ``"+"``\ ，但如果是删除，则存储\ ``"-"``\ ，如果行内容既不是添加也不是删除，则存储一个空字符串。

- ``"new_line_number"``\ 存储一个包含行内容新行号的整数。

- ``"line_count"``\ 存储一个整数，包含行内容的行数。

- ``"old_line_number"``\ 存储包含行内容的旧行号的整数。

- ``"offset"``\ 存储自第一个上下文行内容以来行变化的偏移量。

----

.. _class_EditorVCSInterface_method_get_modified_files_data:

- :ref:`Dictionary<class_Dictionary>` **get_modified_files_data** **(** **)**

返回一个 :ref:`Dictionary<class_Dictionary>`\ ，包含检测到的更改文件的路径，映射到一个整数，该整数表示相应文件更改的状态。

以下整数值用于表示检测到的文件是：

- ``0``\ ：新的 VCS 工作目录

- ``1``\ ：修改

- ``2``\ ：重命名

- ``3``\ ：删除

- ``4``\ ：类型改变

----

.. _class_EditorVCSInterface_method_get_project_name:

- :ref:`String<class_String>` **get_project_name** **(** **)**

返回VCS工作目录的项目名称。

----

.. _class_EditorVCSInterface_method_get_vcs_name:

- :ref:`String<class_String>` **get_vcs_name** **(** **)**

如果VCS已经初始化，返回VCS的名称，否则返回一个空字符串。

----

.. _class_EditorVCSInterface_method_initialize:

- :ref:`bool<class_bool>` **initialize** **(** :ref:`String<class_String>` project_root_path **)**

初始化VCS addon（如果还未初始化）。使用参数值作为项目工作目录的路径。如果需要，创建初始提交。如果成功，返回\ ``true``\ ，否则返回\ ``false``\ 。

----

.. _class_EditorVCSInterface_method_is_addon_ready:

- :ref:`bool<class_bool>` **is_addon_ready** **(** **)**

如果addon准备好响应函数调用，返回\ ``true``\ ，否则返回\ ``false``\ 。

----

.. _class_EditorVCSInterface_method_is_vcs_initialized:

- :ref:`bool<class_bool>` **is_vcs_initialized** **(** **)**

如果VCS插件已经初始化，返回\ ``true``\ ，否则返回\ ``false``\ 。

----

.. _class_EditorVCSInterface_method_shut_down:

- :ref:`bool<class_bool>` **shut_down** **(** **)**

关闭VCS插件，允许清理代码去调用运行。如果没有失败，返回\ ``true``\ ，否则返回\ ``false``\ 。

----

.. _class_EditorVCSInterface_method_stage_file:

- void **stage_file** **(** :ref:`String<class_String>` file_path **)**

调用\ :ref:`commit<class_EditorVCSInterface_method_commit>`\ 时应提交的文件。参数应包含绝对路径。

----

.. _class_EditorVCSInterface_method_unstage_file:

- void **unstage_file** **(** :ref:`String<class_String>` file_path **)**

解除之前暂存的要提交的文件，以便在调用\ :ref:`commit<class_EditorVCSInterface_method_commit>`\ 时不再提交。参数应包含绝对路径。

.. |virtual| replace:: :abbr:`virtual (This method should typically be overridden by the user to have any effect.)`
.. |const| replace:: :abbr:`const (This method has no side effects. It doesn't modify any of the instance's member variables.)`
.. |vararg| replace:: :abbr:`vararg (This method accepts any number of arguments after the ones described here.)`
