:github_url: hide

.. Generated automatically by doc/tools/make_rst.py in Godot's source tree.
.. DO NOT EDIT THIS FILE, but the MeshDataTool.xml source instead.
.. The source is found in doc/classes or modules/<name>/doc_classes.

.. _class_MeshDataTool:

MeshDataTool
============

**Inherits:** :ref:`Reference<class_Reference>` **<** :ref:`Object<class_Object>`

用于帮助编辑和使用 :ref:`Mesh<class_Mesh>` 网格数据的工具。

描述
----

MeshDataTool提供对\ :ref:`Mesh<class_Mesh>`\ 中单个顶点的访问。它允许用户读取和编辑网格的顶点数据。还可以创建面和边的数组。

要使用MeshDataTool，请使用\ :ref:`create_from_surface<class_MeshDataTool_method_create_from_surface>`\ 加载网格。当完成编辑数据后，用\ :ref:`commit_to_surface<class_MeshDataTool_method_commit_to_surface>`\ 将数据提交给Mesh。

下面是如何使用MeshDataTool的例子。

::

    var mesh = ArrayMesh.new()
    mesh.add_surface_from_arrays(Mesh.PRIMITIVE_TRIANGLES, CubeMesh.new().get_mesh_arrays())
    var mdt = MeshDataTool.new()
    mdt.create_from_surface(mesh, 0)
    for i in range(mdt.get_vertex_count()):
        var vertex = mdt.get_vertex(i)
        # 在这个例子中，我们将Mesh扩展了一个单元，这样就会产生分离的面，因为它是平面阴影。
            vertex += mdt.get_vertex_normal(i)
        # 保存你的改动。
        mdt.set_vertex(i, vertex)
    mesh.surface_remove(0)
    mdt.commit_to_surface(mesh)
    var mi = MeshInstance.new()
    mi.mesh = mesh
    add_child(mi)

参阅\ :ref:`ArrayMesh<class_ArrayMesh>`\ 、\ :ref:`ImmediateGeometry<class_ImmediateGeometry>`\ 和\ :ref:`SurfaceTool<class_SurfaceTool>`\ 的程序性几何体生成。

\ **注意：** Godot对三角形原始模式的前端面使用顺时针\ `缠绕顺序 <https://learnopengl.com/Advanced-OpenGL/Face-culling>`__\ 。

方法
----

+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`clear<class_MeshDataTool_method_clear>` **(** **)**                                                                                                        |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Error<enum_@GlobalScope_Error>`     | :ref:`commit_to_surface<class_MeshDataTool_method_commit_to_surface>` **(** :ref:`ArrayMesh<class_ArrayMesh>` mesh **)**                                         |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Error<enum_@GlobalScope_Error>`     | :ref:`create_from_surface<class_MeshDataTool_method_create_from_surface>` **(** :ref:`ArrayMesh<class_ArrayMesh>` mesh, :ref:`int<class_int>` surface **)**      |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                     | :ref:`get_edge_count<class_MeshDataTool_method_get_edge_count>` **(** **)** |const|                                                                              |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`PoolIntArray<class_PoolIntArray>`   | :ref:`get_edge_faces<class_MeshDataTool_method_get_edge_faces>` **(** :ref:`int<class_int>` idx **)** |const|                                                    |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Variant<class_Variant>`             | :ref:`get_edge_meta<class_MeshDataTool_method_get_edge_meta>` **(** :ref:`int<class_int>` idx **)** |const|                                                      |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                     | :ref:`get_edge_vertex<class_MeshDataTool_method_get_edge_vertex>` **(** :ref:`int<class_int>` idx, :ref:`int<class_int>` vertex **)** |const|                    |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                     | :ref:`get_face_count<class_MeshDataTool_method_get_face_count>` **(** **)** |const|                                                                              |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                     | :ref:`get_face_edge<class_MeshDataTool_method_get_face_edge>` **(** :ref:`int<class_int>` idx, :ref:`int<class_int>` edge **)** |const|                          |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Variant<class_Variant>`             | :ref:`get_face_meta<class_MeshDataTool_method_get_face_meta>` **(** :ref:`int<class_int>` idx **)** |const|                                                      |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Vector3<class_Vector3>`             | :ref:`get_face_normal<class_MeshDataTool_method_get_face_normal>` **(** :ref:`int<class_int>` idx **)** |const|                                                  |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                     | :ref:`get_face_vertex<class_MeshDataTool_method_get_face_vertex>` **(** :ref:`int<class_int>` idx, :ref:`int<class_int>` vertex **)** |const|                    |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                     | :ref:`get_format<class_MeshDataTool_method_get_format>` **(** **)** |const|                                                                                      |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Material<class_Material>`           | :ref:`get_material<class_MeshDataTool_method_get_material>` **(** **)** |const|                                                                                  |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Vector3<class_Vector3>`             | :ref:`get_vertex<class_MeshDataTool_method_get_vertex>` **(** :ref:`int<class_int>` idx **)** |const|                                                            |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`PoolIntArray<class_PoolIntArray>`   | :ref:`get_vertex_bones<class_MeshDataTool_method_get_vertex_bones>` **(** :ref:`int<class_int>` idx **)** |const|                                                |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Color<class_Color>`                 | :ref:`get_vertex_color<class_MeshDataTool_method_get_vertex_color>` **(** :ref:`int<class_int>` idx **)** |const|                                                |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                     | :ref:`get_vertex_count<class_MeshDataTool_method_get_vertex_count>` **(** **)** |const|                                                                          |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`PoolIntArray<class_PoolIntArray>`   | :ref:`get_vertex_edges<class_MeshDataTool_method_get_vertex_edges>` **(** :ref:`int<class_int>` idx **)** |const|                                                |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`PoolIntArray<class_PoolIntArray>`   | :ref:`get_vertex_faces<class_MeshDataTool_method_get_vertex_faces>` **(** :ref:`int<class_int>` idx **)** |const|                                                |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Variant<class_Variant>`             | :ref:`get_vertex_meta<class_MeshDataTool_method_get_vertex_meta>` **(** :ref:`int<class_int>` idx **)** |const|                                                  |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Vector3<class_Vector3>`             | :ref:`get_vertex_normal<class_MeshDataTool_method_get_vertex_normal>` **(** :ref:`int<class_int>` idx **)** |const|                                              |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Plane<class_Plane>`                 | :ref:`get_vertex_tangent<class_MeshDataTool_method_get_vertex_tangent>` **(** :ref:`int<class_int>` idx **)** |const|                                            |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Vector2<class_Vector2>`             | :ref:`get_vertex_uv<class_MeshDataTool_method_get_vertex_uv>` **(** :ref:`int<class_int>` idx **)** |const|                                                      |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Vector2<class_Vector2>`             | :ref:`get_vertex_uv2<class_MeshDataTool_method_get_vertex_uv2>` **(** :ref:`int<class_int>` idx **)** |const|                                                    |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`PoolRealArray<class_PoolRealArray>` | :ref:`get_vertex_weights<class_MeshDataTool_method_get_vertex_weights>` **(** :ref:`int<class_int>` idx **)** |const|                                            |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`set_edge_meta<class_MeshDataTool_method_set_edge_meta>` **(** :ref:`int<class_int>` idx, :ref:`Variant<class_Variant>` meta **)**                          |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`set_face_meta<class_MeshDataTool_method_set_face_meta>` **(** :ref:`int<class_int>` idx, :ref:`Variant<class_Variant>` meta **)**                          |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`set_material<class_MeshDataTool_method_set_material>` **(** :ref:`Material<class_Material>` material **)**                                                 |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`set_vertex<class_MeshDataTool_method_set_vertex>` **(** :ref:`int<class_int>` idx, :ref:`Vector3<class_Vector3>` vertex **)**                              |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`set_vertex_bones<class_MeshDataTool_method_set_vertex_bones>` **(** :ref:`int<class_int>` idx, :ref:`PoolIntArray<class_PoolIntArray>` bones **)**         |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`set_vertex_color<class_MeshDataTool_method_set_vertex_color>` **(** :ref:`int<class_int>` idx, :ref:`Color<class_Color>` color **)**                       |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`set_vertex_meta<class_MeshDataTool_method_set_vertex_meta>` **(** :ref:`int<class_int>` idx, :ref:`Variant<class_Variant>` meta **)**                      |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`set_vertex_normal<class_MeshDataTool_method_set_vertex_normal>` **(** :ref:`int<class_int>` idx, :ref:`Vector3<class_Vector3>` normal **)**                |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`set_vertex_tangent<class_MeshDataTool_method_set_vertex_tangent>` **(** :ref:`int<class_int>` idx, :ref:`Plane<class_Plane>` tangent **)**                 |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`set_vertex_uv<class_MeshDataTool_method_set_vertex_uv>` **(** :ref:`int<class_int>` idx, :ref:`Vector2<class_Vector2>` uv **)**                            |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`set_vertex_uv2<class_MeshDataTool_method_set_vertex_uv2>` **(** :ref:`int<class_int>` idx, :ref:`Vector2<class_Vector2>` uv2 **)**                         |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`set_vertex_weights<class_MeshDataTool_method_set_vertex_weights>` **(** :ref:`int<class_int>` idx, :ref:`PoolRealArray<class_PoolRealArray>` weights **)** |
+-------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------+

方法说明
--------

.. _class_MeshDataTool_method_clear:

- void **clear** **(** **)**

将当前MeshDataTool中所有的数据全部清除。

----

.. _class_MeshDataTool_method_commit_to_surface:

- :ref:`Error<enum_@GlobalScope_Error>` **commit_to_surface** **(** :ref:`ArrayMesh<class_ArrayMesh>` mesh **)**

使用编辑后的数据，向特定的\ :ref:`Mesh<class_Mesh>`\ 中添加一个新的面。

----

.. _class_MeshDataTool_method_create_from_surface:

- :ref:`Error<enum_@GlobalScope_Error>` **create_from_surface** **(** :ref:`ArrayMesh<class_ArrayMesh>` mesh, :ref:`int<class_int>` surface **)**

使用给定\ :ref:`Mesh<class_Mesh>`\ 的指定表面来填充MeshDataTool的数据。

要求\ :ref:`Mesh<class_Mesh>`\ 具有基本类型\ :ref:`Mesh.PRIMITIVE_TRIANGLES<class_Mesh_constant_PRIMITIVE_TRIANGLES>`\ 。

----

.. _class_MeshDataTool_method_get_edge_count:

- :ref:`int<class_int>` **get_edge_count** **(** **)** |const|

返回这个\ :ref:`Mesh<class_Mesh>`\ 的边数。

----

.. _class_MeshDataTool_method_get_edge_faces:

- :ref:`PoolIntArray<class_PoolIntArray>` **get_edge_faces** **(** :ref:`int<class_int>` idx **)** |const|

返回与给定边相邻的面数组。

----

.. _class_MeshDataTool_method_get_edge_meta:

- :ref:`Variant<class_Variant>` **get_edge_meta** **(** :ref:`int<class_int>` idx **)** |const|

返回给定边的元数据。

----

.. _class_MeshDataTool_method_get_edge_vertex:

- :ref:`int<class_int>` **get_edge_vertex** **(** :ref:`int<class_int>` idx, :ref:`int<class_int>` vertex **)** |const|

返回连接到给定边的指定顶点的索引。

顶点参数只能是0或1，因为边是由两个顶点组成的。

----

.. _class_MeshDataTool_method_get_face_count:

- :ref:`int<class_int>` **get_face_count** **(** **)** |const|

返回这个\ :ref:`Mesh<class_Mesh>`\ 中的面数。

----

.. _class_MeshDataTool_method_get_face_edge:

- :ref:`int<class_int>` **get_face_edge** **(** :ref:`int<class_int>` idx, :ref:`int<class_int>` edge **)** |const|

返回与给定面关联的指定边。

Edge参数必须小于等于2，因为面只有3条边。

----

.. _class_MeshDataTool_method_get_face_meta:

- :ref:`Variant<class_Variant>` **get_face_meta** **(** :ref:`int<class_int>` idx **)** |const|

返回与给定面关联的元数据。

----

.. _class_MeshDataTool_method_get_face_normal:

- :ref:`Vector3<class_Vector3>` **get_face_normal** **(** :ref:`int<class_int>` idx **)** |const|

计算并返回给定面的面法线。

----

.. _class_MeshDataTool_method_get_face_vertex:

- :ref:`int<class_int>` **get_face_vertex** **(** :ref:`int<class_int>` idx, :ref:`int<class_int>` vertex **)** |const|

返回给定面的指定顶点。

顶点参数必须小于等于2，因为面包含3个顶点。

----

.. _class_MeshDataTool_method_get_format:

- :ref:`int<class_int>` **get_format** **(** **)** |const|

返回 :ref:`Mesh<class_Mesh>` 的格式，该格式是由 :ref:`Mesh<class_Mesh>` 格式标识组合而成的整数。例如，一个同时包含顶点和法线的网格将返回\ ``3``\ 格式，因为 :ref:`ArrayMesh.ARRAY_FORMAT_VERTEX<class_ArrayMesh_constant_ARRAY_FORMAT_VERTEX>` = ``1``\ ，\ :ref:`ArrayMesh.ARRAY_FORMAT_NORMAL<class_ArrayMesh_constant_ARRAY_FORMAT_NORMAL>` = ``2``\ 。

参阅 :ref:`ArrayFormat<enum_ArrayMesh_ArrayFormat>` 的格式标识列表。

----

.. _class_MeshDataTool_method_get_material:

- :ref:`Material<class_Material>` **get_material** **(** **)** |const|

返回分配给\ :ref:`Mesh<class_Mesh>`\ 的材质。

----

.. _class_MeshDataTool_method_get_vertex:

- :ref:`Vector3<class_Vector3>` **get_vertex** **(** :ref:`int<class_int>` idx **)** |const|

返回给定索引处的顶点。

----

.. _class_MeshDataTool_method_get_vertex_bones:

- :ref:`PoolIntArray<class_PoolIntArray>` **get_vertex_bones** **(** :ref:`int<class_int>` idx **)** |const|

返回给定顶点的骨架。

----

.. _class_MeshDataTool_method_get_vertex_color:

- :ref:`Color<class_Color>` **get_vertex_color** **(** :ref:`int<class_int>` idx **)** |const|

返回给定顶点的颜色。

----

.. _class_MeshDataTool_method_get_vertex_count:

- :ref:`int<class_int>` **get_vertex_count** **(** **)** |const|

返回\ :ref:`Mesh<class_Mesh>`\ 中顶点的总数。

----

.. _class_MeshDataTool_method_get_vertex_edges:

- :ref:`PoolIntArray<class_PoolIntArray>` **get_vertex_edges** **(** :ref:`int<class_int>` idx **)** |const|

返回共享给定顶点的边的数组。

----

.. _class_MeshDataTool_method_get_vertex_faces:

- :ref:`PoolIntArray<class_PoolIntArray>` **get_vertex_faces** **(** :ref:`int<class_int>` idx **)** |const|

返回共享给定顶点的面数组。

----

.. _class_MeshDataTool_method_get_vertex_meta:

- :ref:`Variant<class_Variant>` **get_vertex_meta** **(** :ref:`int<class_int>` idx **)** |const|

返回与给定顶点关联的元数据。

----

.. _class_MeshDataTool_method_get_vertex_normal:

- :ref:`Vector3<class_Vector3>` **get_vertex_normal** **(** :ref:`int<class_int>` idx **)** |const|

返回给定顶点的法线。

----

.. _class_MeshDataTool_method_get_vertex_tangent:

- :ref:`Plane<class_Plane>` **get_vertex_tangent** **(** :ref:`int<class_int>` idx **)** |const|

返回给定顶点的正切值。

----

.. _class_MeshDataTool_method_get_vertex_uv:

- :ref:`Vector2<class_Vector2>` **get_vertex_uv** **(** :ref:`int<class_int>` idx **)** |const|

返回给定顶点的UV。

----

.. _class_MeshDataTool_method_get_vertex_uv2:

- :ref:`Vector2<class_Vector2>` **get_vertex_uv2** **(** :ref:`int<class_int>` idx **)** |const|

返回给定顶点的UV2。

----

.. _class_MeshDataTool_method_get_vertex_weights:

- :ref:`PoolRealArray<class_PoolRealArray>` **get_vertex_weights** **(** :ref:`int<class_int>` idx **)** |const|

返回给定顶点的骨骼权重。

----

.. _class_MeshDataTool_method_set_edge_meta:

- void **set_edge_meta** **(** :ref:`int<class_int>` idx, :ref:`Variant<class_Variant>` meta **)**

设置给定边的元数据。

----

.. _class_MeshDataTool_method_set_face_meta:

- void **set_face_meta** **(** :ref:`int<class_int>` idx, :ref:`Variant<class_Variant>` meta **)**

设置给定面的元数据。

----

.. _class_MeshDataTool_method_set_material:

- void **set_material** **(** :ref:`Material<class_Material>` material **)**

设置新构建的\ :ref:`Mesh<class_Mesh>`\ 使用的材质。

----

.. _class_MeshDataTool_method_set_vertex:

- void **set_vertex** **(** :ref:`int<class_int>` idx, :ref:`Vector3<class_Vector3>` vertex **)**

设置给定顶点的位置。

----

.. _class_MeshDataTool_method_set_vertex_bones:

- void **set_vertex_bones** **(** :ref:`int<class_int>` idx, :ref:`PoolIntArray<class_PoolIntArray>` bones **)**

设置给定顶点的骨架。

----

.. _class_MeshDataTool_method_set_vertex_color:

- void **set_vertex_color** **(** :ref:`int<class_int>` idx, :ref:`Color<class_Color>` color **)**

设置给定顶点的颜色。

----

.. _class_MeshDataTool_method_set_vertex_meta:

- void **set_vertex_meta** **(** :ref:`int<class_int>` idx, :ref:`Variant<class_Variant>` meta **)**

设置与给定顶点关联的元数据。

----

.. _class_MeshDataTool_method_set_vertex_normal:

- void **set_vertex_normal** **(** :ref:`int<class_int>` idx, :ref:`Vector3<class_Vector3>` normal **)**

设置给定顶点的法线。

----

.. _class_MeshDataTool_method_set_vertex_tangent:

- void **set_vertex_tangent** **(** :ref:`int<class_int>` idx, :ref:`Plane<class_Plane>` tangent **)**

设置给定顶点的切线。

----

.. _class_MeshDataTool_method_set_vertex_uv:

- void **set_vertex_uv** **(** :ref:`int<class_int>` idx, :ref:`Vector2<class_Vector2>` uv **)**

设置给定顶点的UV。

----

.. _class_MeshDataTool_method_set_vertex_uv2:

- void **set_vertex_uv2** **(** :ref:`int<class_int>` idx, :ref:`Vector2<class_Vector2>` uv2 **)**

设置给定顶点的UV2。

----

.. _class_MeshDataTool_method_set_vertex_weights:

- void **set_vertex_weights** **(** :ref:`int<class_int>` idx, :ref:`PoolRealArray<class_PoolRealArray>` weights **)**

设置给定顶点的骨骼权重。

.. |virtual| replace:: :abbr:`virtual (This method should typically be overridden by the user to have any effect.)`
.. |const| replace:: :abbr:`const (This method has no side effects. It doesn't modify any of the instance's member variables.)`
.. |vararg| replace:: :abbr:`vararg (This method accepts any number of arguments after the ones described here.)`
