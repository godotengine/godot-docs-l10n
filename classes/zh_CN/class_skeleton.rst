:github_url: hide

.. Generated automatically by doc/tools/make_rst.py in Godot's source tree.
.. DO NOT EDIT THIS FILE, but the Skeleton.xml source instead.
.. The source is found in doc/classes or modules/<name>/doc_classes.

.. _class_Skeleton:

Skeleton
========

**Inherits:** :ref:`Spatial<class_Spatial>` **<** :ref:`Node<class_Node>` **<** :ref:`Object<class_Object>`

角色和动画对象的骨架。

描述
----

骨架为管理骨骼提供了分层的界面，包括姿势、放松和动画（请参阅 :ref:`Animation<class_Animation>`\ ）。它还可以使用布娃娃物理。

骨骼相对于骨架的整体变换是由以下层次顺序决定的：放松姿势、自定义姿势和姿势。

注意，下面的“全局姿势”是指骨骼相对于骨架的整体变换，所以它不是骨骼的实际全局或世界变换。

教程
----

- `3D Inverse Kinematics Demo <https://godotengine.org/asset-library/asset/523>`__

- `Third Person Shooter Demo <https://godotengine.org/asset-library/asset/678>`__

方法
----

+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`add_bone<class_Skeleton_method_add_bone>` **(** :ref:`String<class_String>` name **)**                                                                                                                                                             |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`bind_child_node_to_bone<class_Skeleton_method_bind_child_node_to_bone>` **(** :ref:`int<class_int>` bone_idx, :ref:`Node<class_Node>` node **)**                                                                                                   |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`clear_bones<class_Skeleton_method_clear_bones>` **(** **)**                                                                                                                                                                                        |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`clear_bones_global_pose_override<class_Skeleton_method_clear_bones_global_pose_override>` **(** **)**                                                                                                                                              |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                     | :ref:`find_bone<class_Skeleton_method_find_bone>` **(** :ref:`String<class_String>` name **)** |const|                                                                                                                                                   |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                     | :ref:`get_bone_count<class_Skeleton_method_get_bone_count>` **(** **)** |const|                                                                                                                                                                          |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Transform<class_Transform>`         | :ref:`get_bone_custom_pose<class_Skeleton_method_get_bone_custom_pose>` **(** :ref:`int<class_int>` bone_idx **)** |const|                                                                                                                               |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Transform<class_Transform>`         | :ref:`get_bone_global_pose<class_Skeleton_method_get_bone_global_pose>` **(** :ref:`int<class_int>` bone_idx **)** |const|                                                                                                                               |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Transform<class_Transform>`         | :ref:`get_bone_global_pose_no_override<class_Skeleton_method_get_bone_global_pose_no_override>` **(** :ref:`int<class_int>` bone_idx **)** |const|                                                                                                       |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>`               | :ref:`get_bone_name<class_Skeleton_method_get_bone_name>` **(** :ref:`int<class_int>` bone_idx **)** |const|                                                                                                                                             |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                     | :ref:`get_bone_parent<class_Skeleton_method_get_bone_parent>` **(** :ref:`int<class_int>` bone_idx **)** |const|                                                                                                                                         |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Transform<class_Transform>`         | :ref:`get_bone_pose<class_Skeleton_method_get_bone_pose>` **(** :ref:`int<class_int>` bone_idx **)** |const|                                                                                                                                             |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Transform<class_Transform>`         | :ref:`get_bone_rest<class_Skeleton_method_get_bone_rest>` **(** :ref:`int<class_int>` bone_idx **)** |const|                                                                                                                                             |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Array<class_Array>`                 | :ref:`get_bound_child_nodes_to_bone<class_Skeleton_method_get_bound_child_nodes_to_bone>` **(** :ref:`int<class_int>` bone_idx **)** |const|                                                                                                             |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`bool<class_bool>`                   | :ref:`is_bone_rest_disabled<class_Skeleton_method_is_bone_rest_disabled>` **(** :ref:`int<class_int>` bone_idx **)** |const|                                                                                                                             |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`localize_rests<class_Skeleton_method_localize_rests>` **(** **)**                                                                                                                                                                                  |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`physical_bones_add_collision_exception<class_Skeleton_method_physical_bones_add_collision_exception>` **(** :ref:`RID<class_RID>` exception **)**                                                                                                  |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`physical_bones_remove_collision_exception<class_Skeleton_method_physical_bones_remove_collision_exception>` **(** :ref:`RID<class_RID>` exception **)**                                                                                            |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`physical_bones_start_simulation<class_Skeleton_method_physical_bones_start_simulation>` **(** :ref:`Array<class_Array>` bones=[  ] **)**                                                                                                           |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`physical_bones_stop_simulation<class_Skeleton_method_physical_bones_stop_simulation>` **(** **)**                                                                                                                                                  |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`SkinReference<class_SkinReference>` | :ref:`register_skin<class_Skeleton_method_register_skin>` **(** :ref:`Skin<class_Skin>` skin **)**                                                                                                                                                       |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`set_bone_custom_pose<class_Skeleton_method_set_bone_custom_pose>` **(** :ref:`int<class_int>` bone_idx, :ref:`Transform<class_Transform>` custom_pose **)**                                                                                        |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`set_bone_disable_rest<class_Skeleton_method_set_bone_disable_rest>` **(** :ref:`int<class_int>` bone_idx, :ref:`bool<class_bool>` disable **)**                                                                                                    |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`set_bone_global_pose_override<class_Skeleton_method_set_bone_global_pose_override>` **(** :ref:`int<class_int>` bone_idx, :ref:`Transform<class_Transform>` pose, :ref:`float<class_float>` amount, :ref:`bool<class_bool>` persistent=false **)** |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`set_bone_name<class_Skeleton_method_set_bone_name>` **(** :ref:`int<class_int>` bone_idx, :ref:`String<class_String>` name **)**                                                                                                                   |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`set_bone_parent<class_Skeleton_method_set_bone_parent>` **(** :ref:`int<class_int>` bone_idx, :ref:`int<class_int>` parent_idx **)**                                                                                                               |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`set_bone_pose<class_Skeleton_method_set_bone_pose>` **(** :ref:`int<class_int>` bone_idx, :ref:`Transform<class_Transform>` pose **)**                                                                                                             |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`set_bone_rest<class_Skeleton_method_set_bone_rest>` **(** :ref:`int<class_int>` bone_idx, :ref:`Transform<class_Transform>` rest **)**                                                                                                             |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`unbind_child_node_from_bone<class_Skeleton_method_unbind_child_node_from_bone>` **(** :ref:`int<class_int>` bone_idx, :ref:`Node<class_Node>` node **)**                                                                                           |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                      | :ref:`unparent_bone_and_rest<class_Skeleton_method_unparent_bone_and_rest>` **(** :ref:`int<class_int>` bone_idx **)**                                                                                                                                   |
+-------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

信号
----

.. _class_Skeleton_signal_skeleton_updated:

- **skeleton_updated** **(** **)**

常量
----

.. _class_Skeleton_constant_NOTIFICATION_UPDATE_SKELETON:

- **NOTIFICATION_UPDATE_SKELETON** = **50**

方法说明
--------

.. _class_Skeleton_method_add_bone:

- void **add_bone** **(** :ref:`String<class_String>` name **)**

添加一个骨骼，名称为 ``name``\ 。 :ref:`get_bone_count<class_Skeleton_method_get_bone_count>` 将成为骨骼索引。

----

.. _class_Skeleton_method_bind_child_node_to_bone:

- void **bind_child_node_to_bone** **(** :ref:`int<class_int>` bone_idx, :ref:`Node<class_Node>` node **)**

*很快就会弃用。*

----

.. _class_Skeleton_method_clear_bones:

- void **clear_bones** **(** **)**

清除这个骨架上的所有骨骼。

----

.. _class_Skeleton_method_clear_bones_global_pose_override:

- void **clear_bones_global_pose_override** **(** **)**

----

.. _class_Skeleton_method_find_bone:

- :ref:`int<class_int>` **find_bone** **(** :ref:`String<class_String>` name **)** |const|

返回\ ``name``\ 与其名称匹配的的骨骼索引。

----

.. _class_Skeleton_method_get_bone_count:

- :ref:`int<class_int>` **get_bone_count** **(** **)** |const|

返回骨架中的骨骼数量。

----

.. _class_Skeleton_method_get_bone_custom_pose:

- :ref:`Transform<class_Transform>` **get_bone_custom_pose** **(** :ref:`int<class_int>` bone_idx **)** |const|

返回指定骨骼的自定义姿势。自定义姿势应用于放松姿势之上。

----

.. _class_Skeleton_method_get_bone_global_pose:

- :ref:`Transform<class_Transform>` **get_bone_global_pose** **(** :ref:`int<class_int>` bone_idx **)** |const|

返回相对于骨架的指定骨骼的整体变换。由于是相对于骨架的，这不是该骨骼的实际 "全局 "变换。

----

.. _class_Skeleton_method_get_bone_global_pose_no_override:

- :ref:`Transform<class_Transform>` **get_bone_global_pose_no_override** **(** :ref:`int<class_int>` bone_idx **)** |const|

返回指定骨骼的整体变换，相对于骨架，但没有任何全局姿势覆盖。相对于骨架帧，这不是骨骼的实际“全局”变换。

----

.. _class_Skeleton_method_get_bone_name:

- :ref:`String<class_String>` **get_bone_name** **(** :ref:`int<class_int>` bone_idx **)** |const|

返回索引 ``index`` 处的骨骼名称。

----

.. _class_Skeleton_method_get_bone_parent:

- :ref:`int<class_int>` **get_bone_parent** **(** :ref:`int<class_int>` bone_idx **)** |const|

返回在\ ``bone_idx``\ 处的骨骼的父级索引。如果是-1，那么骨骼就没有父骨骼。

\ **注意：**\ 返回的父骨骼将总是小于\ ``bone_idx``\ 。

----

.. _class_Skeleton_method_get_bone_pose:

- :ref:`Transform<class_Transform>` **get_bone_pose** **(** :ref:`int<class_int>` bone_idx **)** |const|

返回指定骨骼的姿势变换。姿势应用于自定义姿势之上，自定义姿势应用于放松姿势之上。

----

.. _class_Skeleton_method_get_bone_rest:

- :ref:`Transform<class_Transform>` **get_bone_rest** **(** :ref:`int<class_int>` bone_idx **)** |const|

返回骨骼 ``bone_idx`` 的休息变换。

----

.. _class_Skeleton_method_get_bound_child_nodes_to_bone:

- :ref:`Array<class_Array>` **get_bound_child_nodes_to_bone** **(** :ref:`int<class_int>` bone_idx **)** |const|

*很快就会弃用。*

----

.. _class_Skeleton_method_is_bone_rest_disabled:

- :ref:`bool<class_bool>` **is_bone_rest_disabled** **(** :ref:`int<class_int>` bone_idx **)** |const|

----

.. _class_Skeleton_method_localize_rests:

- void **localize_rests** **(** **)**

----

.. _class_Skeleton_method_physical_bones_add_collision_exception:

- void **physical_bones_add_collision_exception** **(** :ref:`RID<class_RID>` exception **)**

----

.. _class_Skeleton_method_physical_bones_remove_collision_exception:

- void **physical_bones_remove_collision_exception** **(** :ref:`RID<class_RID>` exception **)**

----

.. _class_Skeleton_method_physical_bones_start_simulation:

- void **physical_bones_start_simulation** **(** :ref:`Array<class_Array>` bones=[  ] **)**

----

.. _class_Skeleton_method_physical_bones_stop_simulation:

- void **physical_bones_stop_simulation** **(** **)**

----

.. _class_Skeleton_method_register_skin:

- :ref:`SkinReference<class_SkinReference>` **register_skin** **(** :ref:`Skin<class_Skin>` skin **)**

----

.. _class_Skeleton_method_set_bone_custom_pose:

- void **set_bone_custom_pose** **(** :ref:`int<class_int>` bone_idx, :ref:`Transform<class_Transform>` custom_pose **)**

----

.. _class_Skeleton_method_set_bone_disable_rest:

- void **set_bone_disable_rest** **(** :ref:`int<class_int>` bone_idx, :ref:`bool<class_bool>` disable **)**

----

.. _class_Skeleton_method_set_bone_global_pose_override:

- void **set_bone_global_pose_override** **(** :ref:`int<class_int>` bone_idx, :ref:`Transform<class_Transform>` pose, :ref:`float<class_float>` amount, :ref:`bool<class_bool>` persistent=false **)**

----

.. _class_Skeleton_method_set_bone_name:

- void **set_bone_name** **(** :ref:`int<class_int>` bone_idx, :ref:`String<class_String>` name **)**

----

.. _class_Skeleton_method_set_bone_parent:

- void **set_bone_parent** **(** :ref:`int<class_int>` bone_idx, :ref:`int<class_int>` parent_idx **)**

将骨骼索引 ``parent_idx`` 设置为 ``bone_idx`` 处骨骼的父级。如果 -1，则骨骼没有父级。

\ **注意：** ``parent_idx`` 必须小于 ``bone_idx``\ 。

----

.. _class_Skeleton_method_set_bone_pose:

- void **set_bone_pose** **(** :ref:`int<class_int>` bone_idx, :ref:`Transform<class_Transform>` pose **)**

设置骨骼 ``bone_idx`` 的姿势变换。

----

.. _class_Skeleton_method_set_bone_rest:

- void **set_bone_rest** **(** :ref:`int<class_int>` bone_idx, :ref:`Transform<class_Transform>` rest **)**

为骨骼\ ``bone_idx``\ 设置休息变换。

----

.. _class_Skeleton_method_unbind_child_node_from_bone:

- void **unbind_child_node_from_bone** **(** :ref:`int<class_int>` bone_idx, :ref:`Node<class_Node>` node **)**

*很快就会弃用。*

----

.. _class_Skeleton_method_unparent_bone_and_rest:

- void **unparent_bone_and_rest** **(** :ref:`int<class_int>` bone_idx **)**

.. |virtual| replace:: :abbr:`virtual (This method should typically be overridden by the user to have any effect.)`
.. |const| replace:: :abbr:`const (This method has no side effects. It doesn't modify any of the instance's member variables.)`
.. |vararg| replace:: :abbr:`vararg (This method accepts any number of arguments after the ones described here.)`
