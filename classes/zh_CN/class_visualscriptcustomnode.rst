:github_url: hide

.. Generated automatically by doc/tools/make_rst.py in Godot's source tree.
.. DO NOT EDIT THIS FILE, but the VisualScriptCustomNode.xml source instead.
.. The source is found in doc/classes or modules/<name>/doc_classes.

.. _class_VisualScriptCustomNode:

VisualScriptCustomNode
======================

**Inherits:** :ref:`VisualScriptNode<class_VisualScriptNode>` **<** :ref:`Resource<class_Resource>` **<** :ref:`Reference<class_Reference>` **<** :ref:`Object<class_Object>`

有脚本的可视化脚本节点。

描述
----

自定义的可视化脚本节点，可以用强大的方式进行脚本编写。

方法
----

+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>`   | :ref:`_get_caption<class_VisualScriptCustomNode_method__get_caption>` **(** **)** |virtual|                                                                                                                                |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>`   | :ref:`_get_category<class_VisualScriptCustomNode_method__get_category>` **(** **)** |virtual|                                                                                                                              |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`         | :ref:`_get_input_value_port_count<class_VisualScriptCustomNode_method__get_input_value_port_count>` **(** **)** |virtual|                                                                                                  |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`         | :ref:`_get_input_value_port_hint<class_VisualScriptCustomNode_method__get_input_value_port_hint>` **(** :ref:`int<class_int>` idx **)** |virtual|                                                                          |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>`   | :ref:`_get_input_value_port_hint_string<class_VisualScriptCustomNode_method__get_input_value_port_hint_string>` **(** :ref:`int<class_int>` idx **)** |virtual|                                                            |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>`   | :ref:`_get_input_value_port_name<class_VisualScriptCustomNode_method__get_input_value_port_name>` **(** :ref:`int<class_int>` idx **)** |virtual|                                                                          |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`         | :ref:`_get_input_value_port_type<class_VisualScriptCustomNode_method__get_input_value_port_type>` **(** :ref:`int<class_int>` idx **)** |virtual|                                                                          |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`         | :ref:`_get_output_sequence_port_count<class_VisualScriptCustomNode_method__get_output_sequence_port_count>` **(** **)** |virtual|                                                                                          |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>`   | :ref:`_get_output_sequence_port_text<class_VisualScriptCustomNode_method__get_output_sequence_port_text>` **(** :ref:`int<class_int>` idx **)** |virtual|                                                                  |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`         | :ref:`_get_output_value_port_count<class_VisualScriptCustomNode_method__get_output_value_port_count>` **(** **)** |virtual|                                                                                                |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`         | :ref:`_get_output_value_port_hint<class_VisualScriptCustomNode_method__get_output_value_port_hint>` **(** :ref:`int<class_int>` idx **)** |virtual|                                                                        |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>`   | :ref:`_get_output_value_port_hint_string<class_VisualScriptCustomNode_method__get_output_value_port_hint_string>` **(** :ref:`int<class_int>` idx **)** |virtual|                                                          |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>`   | :ref:`_get_output_value_port_name<class_VisualScriptCustomNode_method__get_output_value_port_name>` **(** :ref:`int<class_int>` idx **)** |virtual|                                                                        |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`         | :ref:`_get_output_value_port_type<class_VisualScriptCustomNode_method__get_output_value_port_type>` **(** :ref:`int<class_int>` idx **)** |virtual|                                                                        |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>`   | :ref:`_get_text<class_VisualScriptCustomNode_method__get_text>` **(** **)** |virtual|                                                                                                                                      |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`         | :ref:`_get_working_memory_size<class_VisualScriptCustomNode_method__get_working_memory_size>` **(** **)** |virtual|                                                                                                        |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`bool<class_bool>`       | :ref:`_has_input_sequence_port<class_VisualScriptCustomNode_method__has_input_sequence_port>` **(** **)** |virtual|                                                                                                        |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Variant<class_Variant>` | :ref:`_step<class_VisualScriptCustomNode_method__step>` **(** :ref:`Array<class_Array>` inputs, :ref:`Array<class_Array>` outputs, :ref:`int<class_int>` start_mode, :ref:`Array<class_Array>` working_mem **)** |virtual| |
+-------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

枚举
----

.. _enum_VisualScriptCustomNode_StartMode:

.. _class_VisualScriptCustomNode_constant_START_MODE_BEGIN_SEQUENCE:

.. _class_VisualScriptCustomNode_constant_START_MODE_CONTINUE_SEQUENCE:

.. _class_VisualScriptCustomNode_constant_START_MODE_RESUME_YIELD:

enum **StartMode**:

- **START_MODE_BEGIN_SEQUENCE** = **0** --- 当\ :ref:`_step<class_VisualScriptCustomNode_method__step>`\ 被调用时，首次使用的启动模式。

- **START_MODE_CONTINUE_SEQUENCE** = **1** --- 当从\ :ref:`STEP_PUSH_STACK_BIT<class_VisualScriptCustomNode_constant_STEP_PUSH_STACK_BIT>`\ 返回后调用\ :ref:`_step<class_VisualScriptCustomNode_method__step>`\ 时使用的启动模式。

- **START_MODE_RESUME_YIELD** = **2** --- 从\ :ref:`STEP_YIELD_BIT<class_VisualScriptCustomNode_constant_STEP_YIELD_BIT>`\ 恢复后调用\ :ref:`_step<class_VisualScriptCustomNode_method__step>`\ 时使用的启动模式。

常量
----

.. _class_VisualScriptCustomNode_constant_STEP_PUSH_STACK_BIT:

.. _class_VisualScriptCustomNode_constant_STEP_GO_BACK_BIT:

.. _class_VisualScriptCustomNode_constant_STEP_NO_ADVANCE_BIT:

.. _class_VisualScriptCustomNode_constant_STEP_EXIT_FUNCTION_BIT:

.. _class_VisualScriptCustomNode_constant_STEP_YIELD_BIT:

- **STEP_PUSH_STACK_BIT** = **16777216** --- 由\ :ref:`_step<class_VisualScriptCustomNode_method__step>`\ 使用的提示，告诉控件应该在没有其他节点可以执行时返回给它。

这被\ :ref:`VisualScriptCondition<class_VisualScriptCondition>`\ 用来在\ ``true``/``false``\ 分支执行完毕后，将序列重定向到 "Done" 端口。

- **STEP_GO_BACK_BIT** = **33554432** --- 由\ :ref:`_step<class_VisualScriptCustomNode_method__step>`\ 使用的提示，告诉控件应该返回，要么命中之前的\ :ref:`STEP_PUSH_STACK_BIT<class_VisualScriptCustomNode_constant_STEP_PUSH_STACK_BIT>`\ ，要么退出函数。

- **STEP_NO_ADVANCE_BIT** = **67108864**

- **STEP_EXIT_FUNCTION_BIT** = **134217728** --- :ref:`_step<class_VisualScriptCustomNode_method__step>`\ 用来告诉控件应该停止和退出函数的提示。

- **STEP_YIELD_BIT** = **268435456** --- 由\ :ref:`_step<class_VisualScriptCustomNode_method__step>`\ 使用的提示，告诉函数应该被yielded。

使用这个要求你至少有一个工作存储槽，它被用于\ :ref:`VisualScriptFunctionState<class_VisualScriptFunctionState>`\ 。

方法说明
--------

.. _class_VisualScriptCustomNode_method__get_caption:

- :ref:`String<class_String>` **_get_caption** **(** **)** |virtual|

返回节点的标题。

----

.. _class_VisualScriptCustomNode_method__get_category:

- :ref:`String<class_String>` **_get_category** **(** **)** |virtual|

返回节点的类别。

----

.. _class_VisualScriptCustomNode_method__get_input_value_port_count:

- :ref:`int<class_int>` **_get_input_value_port_count** **(** **)** |virtual|

返回输入值端口的数量。

----

.. _class_VisualScriptCustomNode_method__get_input_value_port_hint:

- :ref:`int<class_int>` **_get_input_value_port_hint** **(** :ref:`int<class_int>` idx **)** |virtual|

返回指定输入端口的提示。参阅 :ref:`PropertyHint<enum_@GlobalScope_PropertyHint>` 提示。

----

.. _class_VisualScriptCustomNode_method__get_input_value_port_hint_string:

- :ref:`String<class_String>` **_get_input_value_port_hint_string** **(** :ref:`int<class_int>` idx **)** |virtual|

返回指定输入端口的提示字符串。

----

.. _class_VisualScriptCustomNode_method__get_input_value_port_name:

- :ref:`String<class_String>` **_get_input_value_port_name** **(** :ref:`int<class_int>` idx **)** |virtual|

返回指定的输入端口的名称。

----

.. _class_VisualScriptCustomNode_method__get_input_value_port_type:

- :ref:`int<class_int>` **_get_input_value_port_type** **(** :ref:`int<class_int>` idx **)** |virtual|

返回指定输入端口的类型。参阅\ :ref:`Variant.Type<enum_@GlobalScope_Variant.Type>`\ 值。

----

.. _class_VisualScriptCustomNode_method__get_output_sequence_port_count:

- :ref:`int<class_int>` **_get_output_sequence_port_count** **(** **)** |virtual|

返回输出\ **sequence**\ 序列端口的数量。

----

.. _class_VisualScriptCustomNode_method__get_output_sequence_port_text:

- :ref:`String<class_String>` **_get_output_sequence_port_text** **(** :ref:`int<class_int>` idx **)** |virtual|

返回指定的\ **sequence**\ 序列输出的名称。

----

.. _class_VisualScriptCustomNode_method__get_output_value_port_count:

- :ref:`int<class_int>` **_get_output_value_port_count** **(** **)** |virtual|

返回输出值端口的数量。

----

.. _class_VisualScriptCustomNode_method__get_output_value_port_hint:

- :ref:`int<class_int>` **_get_output_value_port_hint** **(** :ref:`int<class_int>` idx **)** |virtual|

返回指定输出端口的提示。参阅\ :ref:`PropertyHint<enum_@GlobalScope_PropertyHint>` 提示。

----

.. _class_VisualScriptCustomNode_method__get_output_value_port_hint_string:

- :ref:`String<class_String>` **_get_output_value_port_hint_string** **(** :ref:`int<class_int>` idx **)** |virtual|

返回指定输出端口的提示字符串。

----

.. _class_VisualScriptCustomNode_method__get_output_value_port_name:

- :ref:`String<class_String>` **_get_output_value_port_name** **(** :ref:`int<class_int>` idx **)** |virtual|

返回指定输出端口的名称。

----

.. _class_VisualScriptCustomNode_method__get_output_value_port_type:

- :ref:`int<class_int>` **_get_output_value_port_type** **(** :ref:`int<class_int>` idx **)** |virtual|

返回指定输出端口的类型。参阅\ :ref:`Variant.Type<enum_@GlobalScope_Variant.Type>`\ 值。

----

.. _class_VisualScriptCustomNode_method__get_text:

- :ref:`String<class_String>` **_get_text** **(** **)** |virtual|

返回自定义节点的文本，就在输入\ **sequence**\ 序列端口旁边显示，如果没有，则在通常被它占用的位置。

----

.. _class_VisualScriptCustomNode_method__get_working_memory_size:

- :ref:`int<class_int>` **_get_working_memory_size** **(** **)** |virtual|

返回自定义节点的运行内存的大小。更多细节参阅 :ref:`_step<class_VisualScriptCustomNode_method__step>` 。

----

.. _class_VisualScriptCustomNode_method__has_input_sequence_port:

- :ref:`bool<class_bool>` **_has_input_sequence_port** **(** **)** |virtual|

返回自定义节点是否有输入\ **sequence**\ 序列端口。

----

.. _class_VisualScriptCustomNode_method__step:

- :ref:`Variant<class_Variant>` **_step** **(** :ref:`Array<class_Array>` inputs, :ref:`Array<class_Array>` outputs, :ref:`int<class_int>` start_mode, :ref:`Array<class_Array>` working_mem **)** |virtual|

执行自定义节点的逻辑，返回要使用的输出序列端口的索引，或者在有错误时返回一个\ :ref:`String<class_String>`\ 。

\ ``inputs``\ 数组包含输入端口的值。

\ ``output``\ 是一个数组，其索引应被设置为相应的输出。

\ ``start_mode``\ 通常是\ :ref:`START_MODE_BEGIN_SEQUENCE<class_VisualScriptCustomNode_constant_START_MODE_BEGIN_SEQUENCE>`\ ，除非你使用了\ ``STEP_*``\ 常量。

\ ``working_mem``\ 是一个数组，可以用来在自定义节点的运行之间持续保存信息。其大小需要用\ :ref:`_get_working_memory_size<class_VisualScriptCustomNode_method__get_working_memory_size>`\ 来预定义。

当返回时，你可以用\ ``STEP_*``\ 中的一个常量来屏蔽返回值。

.. |virtual| replace:: :abbr:`virtual (This method should typically be overridden by the user to have any effect.)`
.. |const| replace:: :abbr:`const (This method has no side effects. It doesn't modify any of the instance's member variables.)`
.. |vararg| replace:: :abbr:`vararg (This method accepts any number of arguments after the ones described here.)`
