:github_url: hide

.. Generated automatically by doc/tools/make_rst.py in Godot's source tree.
.. DO NOT EDIT THIS FILE, but the Curve3D.xml source instead.
.. The source is found in doc/classes or modules/<name>/doc_classes.

.. _class_Curve3D:

Curve3D
=======

**Inherits:** :ref:`Resource<class_Resource>` **<** :ref:`Reference<class_Reference>` **<** :ref:`Object<class_Object>`

描述二维空间的贝兹尔曲线。

描述
----

该类描述了 3D 空间中的贝塞尔曲线。它主要用于给 :ref:`Path<class_Path>` 提供一个形状，但也可以为其他目的手动取样。

它沿曲线保留了一个预先计算好的点缓存，以加快进一步的计算。

属性
----

+---------------------------+--------------------------------------------------------------------+----------+
| :ref:`float<class_float>` | :ref:`bake_interval<class_Curve3D_property_bake_interval>`         | ``0.2``  |
+---------------------------+--------------------------------------------------------------------+----------+
| :ref:`bool<class_bool>`   | :ref:`up_vector_enabled<class_Curve3D_property_up_vector_enabled>` | ``true`` |
+---------------------------+--------------------------------------------------------------------+----------+

方法
----

+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                            | :ref:`add_point<class_Curve3D_method_add_point>` **(** :ref:`Vector3<class_Vector3>` position, :ref:`Vector3<class_Vector3>` in=Vector3( 0, 0, 0 ), :ref:`Vector3<class_Vector3>` out=Vector3( 0, 0, 0 ), :ref:`int<class_int>` at_position=-1 **)** |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                            | :ref:`clear_points<class_Curve3D_method_clear_points>` **(** **)**                                                                                                                                                                                   |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`float<class_float>`                       | :ref:`get_baked_length<class_Curve3D_method_get_baked_length>` **(** **)** |const|                                                                                                                                                                   |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`PoolVector3Array<class_PoolVector3Array>` | :ref:`get_baked_points<class_Curve3D_method_get_baked_points>` **(** **)** |const|                                                                                                                                                                   |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`PoolRealArray<class_PoolRealArray>`       | :ref:`get_baked_tilts<class_Curve3D_method_get_baked_tilts>` **(** **)** |const|                                                                                                                                                                     |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`PoolVector3Array<class_PoolVector3Array>` | :ref:`get_baked_up_vectors<class_Curve3D_method_get_baked_up_vectors>` **(** **)** |const|                                                                                                                                                           |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`float<class_float>`                       | :ref:`get_closest_offset<class_Curve3D_method_get_closest_offset>` **(** :ref:`Vector3<class_Vector3>` to_point **)** |const|                                                                                                                        |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Vector3<class_Vector3>`                   | :ref:`get_closest_point<class_Curve3D_method_get_closest_point>` **(** :ref:`Vector3<class_Vector3>` to_point **)** |const|                                                                                                                          |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`                           | :ref:`get_point_count<class_Curve3D_method_get_point_count>` **(** **)** |const|                                                                                                                                                                     |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Vector3<class_Vector3>`                   | :ref:`get_point_in<class_Curve3D_method_get_point_in>` **(** :ref:`int<class_int>` idx **)** |const|                                                                                                                                                 |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Vector3<class_Vector3>`                   | :ref:`get_point_out<class_Curve3D_method_get_point_out>` **(** :ref:`int<class_int>` idx **)** |const|                                                                                                                                               |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Vector3<class_Vector3>`                   | :ref:`get_point_position<class_Curve3D_method_get_point_position>` **(** :ref:`int<class_int>` idx **)** |const|                                                                                                                                     |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`float<class_float>`                       | :ref:`get_point_tilt<class_Curve3D_method_get_point_tilt>` **(** :ref:`int<class_int>` idx **)** |const|                                                                                                                                             |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Vector3<class_Vector3>`                   | :ref:`interpolate<class_Curve3D_method_interpolate>` **(** :ref:`int<class_int>` idx, :ref:`float<class_float>` t **)** |const|                                                                                                                      |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Vector3<class_Vector3>`                   | :ref:`interpolate_baked<class_Curve3D_method_interpolate_baked>` **(** :ref:`float<class_float>` offset, :ref:`bool<class_bool>` cubic=false **)** |const|                                                                                           |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Vector3<class_Vector3>`                   | :ref:`interpolate_baked_up_vector<class_Curve3D_method_interpolate_baked_up_vector>` **(** :ref:`float<class_float>` offset, :ref:`bool<class_bool>` apply_tilt=false **)** |const|                                                                  |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Vector3<class_Vector3>`                   | :ref:`interpolatef<class_Curve3D_method_interpolatef>` **(** :ref:`float<class_float>` fofs **)** |const|                                                                                                                                            |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                            | :ref:`remove_point<class_Curve3D_method_remove_point>` **(** :ref:`int<class_int>` idx **)**                                                                                                                                                         |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                            | :ref:`set_point_in<class_Curve3D_method_set_point_in>` **(** :ref:`int<class_int>` idx, :ref:`Vector3<class_Vector3>` position **)**                                                                                                                 |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                            | :ref:`set_point_out<class_Curve3D_method_set_point_out>` **(** :ref:`int<class_int>` idx, :ref:`Vector3<class_Vector3>` position **)**                                                                                                               |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                            | :ref:`set_point_position<class_Curve3D_method_set_point_position>` **(** :ref:`int<class_int>` idx, :ref:`Vector3<class_Vector3>` position **)**                                                                                                     |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                            | :ref:`set_point_tilt<class_Curve3D_method_set_point_tilt>` **(** :ref:`int<class_int>` idx, :ref:`float<class_float>` tilt **)**                                                                                                                     |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`PoolVector3Array<class_PoolVector3Array>` | :ref:`tessellate<class_Curve3D_method_tessellate>` **(** :ref:`int<class_int>` max_stages=5, :ref:`float<class_float>` tolerance_degrees=4 **)** |const|                                                                                             |
+-------------------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

属性说明
--------

.. _class_Curve3D_property_bake_interval:

- :ref:`float<class_float>` **bake_interval**

+-----------+--------------------------+
| *Default* | ``0.2``                  |
+-----------+--------------------------+
| *Setter*  | set_bake_interval(value) |
+-----------+--------------------------+
| *Getter*  | get_bake_interval()      |
+-----------+--------------------------+

相邻两个缓存点之间的距离，单位为米。改变它将迫使缓存在下次调用\ :ref:`get_baked_points<class_Curve3D_method_get_baked_points>`\ 或\ :ref:`get_baked_length<class_Curve3D_method_get_baked_length>`\ 函数时重新计算。距离越小，缓存中的点越多，占用的内存也越多，所以使用时要注意。

----

.. _class_Curve3D_property_up_vector_enabled:

- :ref:`bool<class_bool>` **up_vector_enabled**

+-----------+------------------------------+
| *Default* | ``true``                     |
+-----------+------------------------------+
| *Setter*  | set_up_vector_enabled(value) |
+-----------+------------------------------+
| *Getter*  | is_up_vector_enabled()       |
+-----------+------------------------------+

如果\ ``true``\ ，曲线将烘焙出用于定向的向量。当\ :ref:`PathFollow.rotation_mode<class_PathFollow_property_rotation_mode>`\ 被设置为\ :ref:`PathFollow.ROTATION_ORIENTED<class_PathFollow_constant_ROTATION_ORIENTED>`\ 时，就会使用这个功能。改变它将强制重新计算缓存。

方法说明
--------

.. _class_Curve3D_method_add_point:

- void **add_point** **(** :ref:`Vector3<class_Vector3>` position, :ref:`Vector3<class_Vector3>` in=Vector3( 0, 0, 0 ), :ref:`Vector3<class_Vector3>` out=Vector3( 0, 0, 0 ), :ref:`int<class_int>` at_position=-1 **)**

在曲线的 ``position`` 上添加一个点，控制点 ``in`` 和 ``out``\ 。

如果给定了 ``at_position``\ ，这个点会被插入到点号 ``at_position`` 之前，并将这个点（以及之后的每一个点）移到被插入点之后。如果\ ``at_position``\ 没有给定，或者是一个非法值(``at_position <0``\ 或\ ``at_position >= [method get_point_count]``)，该点将被追加在点列表的最后。

----

.. _class_Curve3D_method_clear_points:

- void **clear_points** **(** **)**

从曲线中删除所有点。

----

.. _class_Curve3D_method_get_baked_length:

- :ref:`float<class_float>` **get_baked_length** **(** **)** |const|

根据缓存的点，返回曲线的总长度。给予足够的密度(参阅\ :ref:`bake_interval<class_Curve3D_property_bake_interval>`)，它应该是足够近似的。

----

.. _class_Curve3D_method_get_baked_points:

- :ref:`PoolVector3Array<class_PoolVector3Array>` **get_baked_points** **(** **)** |const|

以 :ref:`PoolVector3Array<class_PoolVector3Array>` 的形式返回缓存的点。

----

.. _class_Curve3D_method_get_baked_tilts:

- :ref:`PoolRealArray<class_PoolRealArray>` **get_baked_tilts** **(** **)** |const|

以 :ref:`PoolRealArray<class_PoolRealArray>` 的形式返回倾斜的缓存。

----

.. _class_Curve3D_method_get_baked_up_vectors:

- :ref:`PoolVector3Array<class_PoolVector3Array>` **get_baked_up_vectors** **(** **)** |const|

以 :ref:`PoolVector3Array<class_PoolVector3Array>` 的形式返回向上向量的缓存。

如果 :ref:`up_vector_enabled<class_Curve3D_property_up_vector_enabled>` 是 ``false``\ ，缓存将是空的。

----

.. _class_Curve3D_method_get_closest_offset:

- :ref:`float<class_float>` **get_closest_offset** **(** :ref:`Vector3<class_Vector3>` to_point **)** |const|

返回离 ``to_point`` 最近的偏移量。这个偏移量可以用在 :ref:`interpolate_baked<class_Curve3D_method_interpolate_baked>` 或 :ref:`interpolate_baked_up_vector<class_Curve3D_method_interpolate_baked_up_vector>` 中。

\ ``to_point`` 必须在这条曲线的局部空间中。

----

.. _class_Curve3D_method_get_closest_point:

- :ref:`Vector3<class_Vector3>` **get_closest_point** **(** :ref:`Vector3<class_Vector3>` to_point **)** |const|

返回最接近 ``to_point`` 并烘焙好的点（在曲线的局部空间）。

\ ``to_point`` 必须是在这个曲线的局部空间。

----

.. _class_Curve3D_method_get_point_count:

- :ref:`int<class_int>` **get_point_count** **(** **)** |const|

返回描述曲线的点数。

----

.. _class_Curve3D_method_get_point_in:

- :ref:`Vector3<class_Vector3>` **get_point_in** **(** :ref:`int<class_int>` idx **)** |const|

返回通往顶点 ``idx`` 的控制点的位置。返回的位置是相对于顶点 ``idx``\ 的。如果索引超出了范围，函数会向控制台发送一个错误，并返回 ``(0, 0, 0)``\ 。

----

.. _class_Curve3D_method_get_point_out:

- :ref:`Vector3<class_Vector3>` **get_point_out** **(** :ref:`int<class_int>` idx **)** |const|

返回从顶点 ``idx`` 伸出的控制点的位置。返回的位置是相对于顶点 ``idx`` 的。如果索引超出了范围，函数会向控制台发送一个错误，并返回 ``(0, 0, 0)``\ 。

----

.. _class_Curve3D_method_get_point_position:

- :ref:`Vector3<class_Vector3>` **get_point_position** **(** :ref:`int<class_int>` idx **)** |const|

返回顶点的位置 ``idx``\ 。如果索引超出边界，函数会向控制台发送一个错误信息，并返回 ``(0，0，0)``\ 。

----

.. _class_Curve3D_method_get_point_tilt:

- :ref:`float<class_float>` **get_point_tilt** **(** :ref:`int<class_int>` idx **)** |const|

返回 ``idx`` 点的倾斜角，单位为弧度。如果指数超出范围，函数将向控制台发送错误信息，并返回 ``0``\ 。

----

.. _class_Curve3D_method_interpolate:

- :ref:`Vector3<class_Vector3>` **interpolate** **(** :ref:`int<class_int>` idx, :ref:`float<class_float>` t **)** |const|

返回顶点 ``idx`` 和顶点 ``idx + 1`` 之间的位置，其中 ``t`` 控制该点是第一个顶点 (``t = 0.0``)、最后一个顶点 (``t = 1.0``)，还是介于两者之间。范围外的\ ``t``\ 的值(``0.0 >= t <=1``)会产生奇怪但可预测的结果。

如果\ ``idx``\ 超出边界，则截断到第一个或最后一个顶点，而\ ``t``\ 则被忽略。如果曲线没有点，函数会向控制台发送一个错误，并返回 ``(0, 0, 0)``\ 。

----

.. _class_Curve3D_method_interpolate_baked:

- :ref:`Vector3<class_Vector3>` **interpolate_baked** **(** :ref:`float<class_float>` offset, :ref:`bool<class_bool>` cubic=false **)** |const|

返回曲线中 ``offset`` 偏移位置的一个点，其中 ``offset`` 以沿曲线的 3D 单位距离测量。

为了做到这一点，它找到 ``offset`` 所在的两个缓存点，然后进行内插值。如果 ``cubic`` 被设置为\ ``true``\ ，这个插值是立方的，如果设置为 ``false``\ ，则是线性的。

立体插值倾向于更好地遵循曲线，但线性插值更快（而且通常足够精确）。

----

.. _class_Curve3D_method_interpolate_baked_up_vector:

- :ref:`Vector3<class_Vector3>` **interpolate_baked_up_vector** **(** :ref:`float<class_float>` offset, :ref:`bool<class_bool>` apply_tilt=false **)** |const|

返回位于 ``offset`` 位置的曲线内的向上向量，其中 ``offset`` 是以 3D 单位测量的曲线距离。

为此，它会找到 ``offset`` 所在的两个缓存向上向量，然后对其进行插值。如果 ``apply_tilt`` 是 ``true``\ ，内插后的倾斜会被应用到内插的向上向量上。

如果曲线没有向上向量，函数会向控制台发送一个错误，并返回 ``(0, 1, 0)``\ 。

----

.. _class_Curve3D_method_interpolatef:

- :ref:`Vector3<class_Vector3>` **interpolatef** **(** :ref:`float<class_float>` fofs **)** |const|

返回顶点 ``fofs`` 的位置。它使用 ``fofs`` 的整数部分作为 ``idx`` 和分数部分作为 ``t`` 调用 :ref:`interpolate<class_Curve3D_method_interpolate>`\ 。

----

.. _class_Curve3D_method_remove_point:

- void **remove_point** **(** :ref:`int<class_int>` idx **)**

从曲线上删除点 ``idx`` 。如果 ``idx`` 越界，会向控制台发送错误信息。

----

.. _class_Curve3D_method_set_point_in:

- void **set_point_in** **(** :ref:`int<class_int>` idx, :ref:`Vector3<class_Vector3>` position **)**

设置通往顶点 ``idx`` 的控制点位置。如果索引超出范围，函数会向控制台发送错误信息。

----

.. _class_Curve3D_method_set_point_out:

- void **set_point_out** **(** :ref:`int<class_int>` idx, :ref:`Vector3<class_Vector3>` position **)**

设置从顶点\ ``idx``\ 引出的控制点位置。如果索引超出范围，该函数会向控制台发送错误。位置是相对于顶点的。

----

.. _class_Curve3D_method_set_point_position:

- void **set_point_position** **(** :ref:`int<class_int>` idx, :ref:`Vector3<class_Vector3>` position **)**

设置顶点\ ``idx``\ 的位置。如果索引超出范围，函数会向控制台发送一个错误信息。

----

.. _class_Curve3D_method_set_point_tilt:

- void **set_point_tilt** **(** :ref:`int<class_int>` idx, :ref:`float<class_float>` tilt **)**

以弧度为单位设置点 ``idx`` 的倾斜角度。如果索引超出范围，该函数会向控制台发送错误。

倾斜控制着沿路径移动的对象沿观察轴的旋转。在控制 :ref:`PathFollow<class_PathFollow>` 的曲线的情况下，此倾斜是对 :ref:`PathFollow<class_PathFollow>` 计算的自然倾斜的偏移。

----

.. _class_Curve3D_method_tessellate:

- :ref:`PoolVector3Array<class_PoolVector3Array>` **tessellate** **(** :ref:`int<class_int>` max_stages=5, :ref:`float<class_float>` tolerance_degrees=4 **)** |const|

返回沿曲线的点的列表，点的密度由曲率控制。也就是说，曲线部分比直线部分有更多的点。

这个近似值在每个点之间做了直段，然后将这些直段细分，直到得到的形状足够相似。

\ ``max_stages`` 控制一个曲线段在被认为足够近似之前可能面临多少次细分。每一次细分都会将曲线段分成两半，所以默认的 5 个阶段意味着每条曲线段最多可以细分 32 次。请谨慎增加!

\ ``tolerance_degrees`` 控制一个曲线段的中点与实际曲线的偏差多少度才会被细分。

.. |virtual| replace:: :abbr:`virtual (This method should typically be overridden by the user to have any effect.)`
.. |const| replace:: :abbr:`const (This method has no side effects. It doesn't modify any of the instance's member variables.)`
.. |vararg| replace:: :abbr:`vararg (This method accepts any number of arguments after the ones described here.)`
