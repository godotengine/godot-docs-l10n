:github_url: hide

.. Generated automatically by doc/tools/make_rst.py in Godot's source tree.
.. DO NOT EDIT THIS FILE, but the AnimationNode.xml source instead.
.. The source is found in doc/classes or modules/<name>/doc_classes.

.. _class_AnimationNode:

AnimationNode
=============

**Inherits:** :ref:`Resource<class_Resource>` **<** :ref:`Reference<class_Reference>` **<** :ref:`Object<class_Object>`

**Inherited By:** :ref:`AnimationNodeAdd2<class_AnimationNodeAdd2>`, :ref:`AnimationNodeAdd3<class_AnimationNodeAdd3>`, :ref:`AnimationNodeBlend2<class_AnimationNodeBlend2>`, :ref:`AnimationNodeBlend3<class_AnimationNodeBlend3>`, :ref:`AnimationNodeOneShot<class_AnimationNodeOneShot>`, :ref:`AnimationNodeOutput<class_AnimationNodeOutput>`, :ref:`AnimationNodeTimeScale<class_AnimationNodeTimeScale>`, :ref:`AnimationNodeTimeSeek<class_AnimationNodeTimeSeek>`, :ref:`AnimationNodeTransition<class_AnimationNodeTransition>`, :ref:`AnimationRootNode<class_AnimationRootNode>`

:ref:`AnimationTree<class_AnimationTree>`\ 节点的基础资源。

描述
----

:ref:`AnimationTree<class_AnimationTree>` 节点的基础资源。通常，它不是直接使用的，但是您可以使用自定义混合公式创建自定义的。

在创建主要用于 :ref:`AnimationNodeBlendTree<class_AnimationNodeBlendTree>` 的节点时，继承该属性，否则应改用 :ref:`AnimationRootNode<class_AnimationRootNode>`\ 。

教程
----

- :doc:`../tutorials/animation/animation_tree`

属性
----

+-------------------------+--------------------------------------------------------------------+
| :ref:`bool<class_bool>` | :ref:`filter_enabled<class_AnimationNode_property_filter_enabled>` |
+-------------------------+--------------------------------------------------------------------+

方法
----

+-------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                | :ref:`add_input<class_AnimationNode_method_add_input>` **(** :ref:`String<class_String>` name **)**                                                                                                                                                                                                                                                        |
+-------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                | :ref:`blend_animation<class_AnimationNode_method_blend_animation>` **(** :ref:`String<class_String>` animation, :ref:`float<class_float>` time, :ref:`float<class_float>` delta, :ref:`bool<class_bool>` seeked, :ref:`float<class_float>` blend **)**                                                                                                     |
+-------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`float<class_float>`           | :ref:`blend_input<class_AnimationNode_method_blend_input>` **(** :ref:`int<class_int>` input_index, :ref:`float<class_float>` time, :ref:`bool<class_bool>` seek, :ref:`float<class_float>` blend, :ref:`FilterAction<enum_AnimationNode_FilterAction>` filter=0, :ref:`bool<class_bool>` optimize=true **)**                                              |
+-------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`float<class_float>`           | :ref:`blend_node<class_AnimationNode_method_blend_node>` **(** :ref:`String<class_String>` name, :ref:`AnimationNode<class_AnimationNode>` node, :ref:`float<class_float>` time, :ref:`bool<class_bool>` seek, :ref:`float<class_float>` blend, :ref:`FilterAction<enum_AnimationNode_FilterAction>` filter=0, :ref:`bool<class_bool>` optimize=true **)** |
+-------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>`         | :ref:`get_caption<class_AnimationNode_method_get_caption>` **(** **)** |virtual|                                                                                                                                                                                                                                                                           |
+-------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Object<class_Object>`         | :ref:`get_child_by_name<class_AnimationNode_method_get_child_by_name>` **(** :ref:`String<class_String>` name **)** |virtual|                                                                                                                                                                                                                              |
+-------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Dictionary<class_Dictionary>` | :ref:`get_child_nodes<class_AnimationNode_method_get_child_nodes>` **(** **)** |virtual|                                                                                                                                                                                                                                                                   |
+-------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`               | :ref:`get_input_count<class_AnimationNode_method_get_input_count>` **(** **)** |const|                                                                                                                                                                                                                                                                     |
+-------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>`         | :ref:`get_input_name<class_AnimationNode_method_get_input_name>` **(** :ref:`int<class_int>` input **)**                                                                                                                                                                                                                                                   |
+-------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Variant<class_Variant>`       | :ref:`get_parameter<class_AnimationNode_method_get_parameter>` **(** :ref:`String<class_String>` name **)** |const|                                                                                                                                                                                                                                        |
+-------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Variant<class_Variant>`       | :ref:`get_parameter_default_value<class_AnimationNode_method_get_parameter_default_value>` **(** :ref:`String<class_String>` name **)** |virtual|                                                                                                                                                                                                          |
+-------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`Array<class_Array>`           | :ref:`get_parameter_list<class_AnimationNode_method_get_parameter_list>` **(** **)** |virtual|                                                                                                                                                                                                                                                             |
+-------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>`         | :ref:`has_filter<class_AnimationNode_method_has_filter>` **(** **)** |virtual|                                                                                                                                                                                                                                                                             |
+-------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`bool<class_bool>`             | :ref:`is_path_filtered<class_AnimationNode_method_is_path_filtered>` **(** :ref:`NodePath<class_NodePath>` path **)** |const|                                                                                                                                                                                                                              |
+-------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                | :ref:`process<class_AnimationNode_method_process>` **(** :ref:`float<class_float>` time, :ref:`bool<class_bool>` seek **)** |virtual|                                                                                                                                                                                                                      |
+-------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                | :ref:`remove_input<class_AnimationNode_method_remove_input>` **(** :ref:`int<class_int>` index **)**                                                                                                                                                                                                                                                       |
+-------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                | :ref:`set_filter_path<class_AnimationNode_method_set_filter_path>` **(** :ref:`NodePath<class_NodePath>` path, :ref:`bool<class_bool>` enable **)**                                                                                                                                                                                                        |
+-------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| void                                | :ref:`set_parameter<class_AnimationNode_method_set_parameter>` **(** :ref:`String<class_String>` name, :ref:`Variant<class_Variant>` value **)**                                                                                                                                                                                                           |
+-------------------------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

信号
----

.. _class_AnimationNode_signal_removed_from_graph:

- **removed_from_graph** **(** **)**

当该节点从图中删除时调用。

----

.. _class_AnimationNode_signal_tree_changed:

- **tree_changed** **(** **)**

由继承自该类且内部有树的节点发出，当其一个节点发生变化时。发出此信号的节点有\ :ref:`AnimationNodeBlendSpace1D<class_AnimationNodeBlendSpace1D>`\ 、\ :ref:`AnimationNodeBlendSpace2D<class_AnimationNodeBlendSpace2D>`\ 、\ :ref:`AnimationNodeStateMachine<class_AnimationNodeStateMachine>`\ 和\ :ref:`AnimationNodeBlendTree<class_AnimationNodeBlendTree>`\ 。

枚举
----

.. _enum_AnimationNode_FilterAction:

.. _class_AnimationNode_constant_FILTER_IGNORE:

.. _class_AnimationNode_constant_FILTER_PASS:

.. _class_AnimationNode_constant_FILTER_STOP:

.. _class_AnimationNode_constant_FILTER_BLEND:

enum **FilterAction**:

- **FILTER_IGNORE** = **0** --- 不要使用过滤功能。

- **FILTER_PASS** = **1** --- 匹配过滤器的路径将被允许通过。

- **FILTER_STOP** = **2** --- 与过滤器匹配的路径将被丢弃。

- **FILTER_BLEND** = **3** --- 与滤镜相匹配的路径将被混合（根据混合值）。

属性说明
--------

.. _class_AnimationNode_property_filter_enabled:

- :ref:`bool<class_bool>` **filter_enabled**

+----------+---------------------------+
| *Setter* | set_filter_enabled(value) |
+----------+---------------------------+
| *Getter* | is_filter_enabled()       |
+----------+---------------------------+

如果\ ``true``\ ，则启用过滤功能。

方法说明
--------

.. _class_AnimationNode_method_add_input:

- void **add_input** **(** :ref:`String<class_String>` name **)**

为节点添加一个输入。这只对创建用于 :ref:`AnimationNodeBlendTree<class_AnimationNodeBlendTree>` 的节点有用。

----

.. _class_AnimationNode_method_blend_animation:

- void **blend_animation** **(** :ref:`String<class_String>` animation, :ref:`float<class_float>` time, :ref:`float<class_float>` delta, :ref:`bool<class_bool>` seeked, :ref:`float<class_float>` blend **)**

按 ``blend`` 量混合一个动画（名称必须在链接的 :ref:`AnimationPlayer<class_AnimationPlayer>` 中有效）。可以通过 ``time`` 和 ``delta``\ ，以及是否发生 ``seek``\ 。

----

.. _class_AnimationNode_method_blend_input:

- :ref:`float<class_float>` **blend_input** **(** :ref:`int<class_int>` input_index, :ref:`float<class_float>` time, :ref:`bool<class_bool>` seek, :ref:`float<class_float>` blend, :ref:`FilterAction<enum_AnimationNode_FilterAction>` filter=0, :ref:`bool<class_bool>` optimize=true **)**

混合一个输入。这只对为 :ref:`AnimationNodeBlendTree<class_AnimationNodeBlendTree>` 创建的节点有用。\ ``time`` 参数是一个相对三角，除非 ``seek`` 是 ``true``\ ，在这种情况下，它是绝对值。可以选择传递过滤模式（选项请参阅 :ref:`FilterAction<enum_AnimationNode_FilterAction>`\ ）。

----

.. _class_AnimationNode_method_blend_node:

- :ref:`float<class_float>` **blend_node** **(** :ref:`String<class_String>` name, :ref:`AnimationNode<class_AnimationNode>` node, :ref:`float<class_float>` time, :ref:`bool<class_bool>` seek, :ref:`float<class_float>` blend, :ref:`FilterAction<enum_AnimationNode_FilterAction>` filter=0, :ref:`bool<class_bool>` optimize=true **)**

混合另一个动画节点（在这个节点包含子动画节点的情况下）。这个函数只有在你继承 :ref:`AnimationRootNode<class_AnimationRootNode>` 而不是 :ref:`AnimationRootNode<class_AnimationRootNode>` 时才有用，否则编辑器将不会显示你的节点进行添加。

----

.. _class_AnimationNode_method_get_caption:

- :ref:`String<class_String>` **get_caption** **(** **)** |virtual|

获取此节点的文本标题（由某些编辑器使用）。

----

.. _class_AnimationNode_method_get_child_by_name:

- :ref:`Object<class_Object>` **get_child_by_name** **(** :ref:`String<class_String>` name **)** |virtual|

按索引获取一个子节点（由继承 :ref:`AnimationRootNode<class_AnimationRootNode>` 的编辑器使用）。

----

.. _class_AnimationNode_method_get_child_nodes:

- :ref:`Dictionary<class_Dictionary>` **get_child_nodes** **(** **)** |virtual|

按照 ``name: node`` 字典的顺序获取所有子节点。仅在继承 :ref:`AnimationRootNode<class_AnimationRootNode>` 时有用。

----

.. _class_AnimationNode_method_get_input_count:

- :ref:`int<class_int>` **get_input_count** **(** **)** |const|

这个节点的输入数量，只对进入\ :ref:`AnimationNodeBlendTree<class_AnimationNodeBlendTree>`\ 的节点有用。

----

.. _class_AnimationNode_method_get_input_name:

- :ref:`String<class_String>` **get_input_name** **(** :ref:`int<class_int>` input **)**

通过索引获取输入的名称。

----

.. _class_AnimationNode_method_get_parameter:

- :ref:`Variant<class_Variant>` **get_parameter** **(** :ref:`String<class_String>` name **)** |const|

获取一个参数的值。参数是你的节点使用的自定义本地存储，给定的资源可以在多个树中重复使用。

----

.. _class_AnimationNode_method_get_parameter_default_value:

- :ref:`Variant<class_Variant>` **get_parameter_default_value** **(** :ref:`String<class_String>` name **)** |virtual|

获取一个参数的默认值。参数是用于节点的自定义本地内存，给定资源可以在多个树中重用。

----

.. _class_AnimationNode_method_get_parameter_list:

- :ref:`Array<class_Array>` **get_parameter_list** **(** **)** |virtual|

获取参数的属性信息。参数是你的节点使用的自定义本地存储，给定的资源可以在多个树中重复使用。格式类似于\ :ref:`Object.get_property_list<class_Object_method_get_property_list>`\ 。

----

.. _class_AnimationNode_method_has_filter:

- :ref:`String<class_String>` **has_filter** **(** **)** |virtual|

返回\ ``true``\ ，是否希望混合树编辑器在此节点上显示过滤器编辑。

----

.. _class_AnimationNode_method_is_path_filtered:

- :ref:`bool<class_bool>` **is_path_filtered** **(** :ref:`NodePath<class_NodePath>` path **)** |const|

返回\ ``true``\ 是否对指定路径进行过滤。

----

.. _class_AnimationNode_method_process:

- void **process** **(** :ref:`float<class_float>` time, :ref:`bool<class_bool>` seek **)** |virtual|

当一个自定义节点被处理时，用户定义的回调被调用。\ ``time``\ 参数是一个相对的delta，除非\ ``seek``\ 是\ ``true``\ ，在这种情况下，它是绝对的。

在这里，调用\ :ref:`blend_input<class_AnimationNode_method_blend_input>`\ 、\ :ref:`blend_node<class_AnimationNode_method_blend_node>`\ 或\ :ref:`blend_animation<class_AnimationNode_method_blend_animation>`\ 函数。你也可以使用\ :ref:`get_parameter<class_AnimationNode_method_get_parameter>`\ 和\ :ref:`set_parameter<class_AnimationNode_method_set_parameter>`\ 来修改本地存储。

这个函数应该返回当前动画完成的剩余时间（如果不确定，请传递被调用的主混合值）。

----

.. _class_AnimationNode_method_remove_input:

- void **remove_input** **(** :ref:`int<class_int>` index **)**

删除输入，仅在处于非活动状态时调用此输入。

----

.. _class_AnimationNode_method_set_filter_path:

- void **set_filter_path** **(** :ref:`NodePath<class_NodePath>` path, :ref:`bool<class_bool>` enable **)**

添加或删除筛选器的路径。

----

.. _class_AnimationNode_method_set_parameter:

- void **set_parameter** **(** :ref:`String<class_String>` name, :ref:`Variant<class_Variant>` value **)**

设置一个自定义参数。这些参数被用作本地存储，因为资源可以在树或场景中重复使用。

.. |virtual| replace:: :abbr:`virtual (This method should typically be overridden by the user to have any effect.)`
.. |const| replace:: :abbr:`const (This method has no side effects. It doesn't modify any of the instance's member variables.)`
.. |vararg| replace:: :abbr:`vararg (This method accepts any number of arguments after the ones described here.)`
