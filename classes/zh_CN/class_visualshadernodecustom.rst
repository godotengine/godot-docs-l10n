:github_url: hide

.. Generated automatically by doc/tools/make_rst.py in Godot's source tree.
.. DO NOT EDIT THIS FILE, but the VisualShaderNodeCustom.xml source instead.
.. The source is found in doc/classes or modules/<name>/doc_classes.

.. _class_VisualShaderNodeCustom:

VisualShaderNodeCustom
======================

**Inherits:** :ref:`VisualShaderNode<class_VisualShaderNode>` **<** :ref:`Resource<class_Resource>` **<** :ref:`Reference<class_Reference>` **<** :ref:`Object<class_Object>`

用于定义自定义\ :ref:`VisualShaderNode<class_VisualShaderNode>`\ 的虚拟类，以便在可视化着色器编辑器中使用。

描述
----

通过继承这个类，你可以创建一个自定义的\ :ref:`VisualShader<class_VisualShader>`\ 脚本插件，它将被自动添加到可视化着色器编辑器中。\ :ref:`VisualShaderNode<class_VisualShaderNode>`\ 的行为是通过重写所提供的虚方法来定义的。

为了使节点被注册为编辑器插件，你必须使用\ ``tool``\ 关键字，并为自定义脚本提供一个\ ``class_name``\ 。例如:

::

    tool
    extends VisualShaderNodeCustom
    class_name VisualShaderNodeNoise

教程
----

- :doc:`../tutorials/plugins/editor/visual_shader_plugins`

方法
----

+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>` | :ref:`_get_category<class_VisualShaderNodeCustom_method__get_category>` **(** **)** |virtual|                                                                                                                             |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>` | :ref:`_get_code<class_VisualShaderNodeCustom_method__get_code>` **(** :ref:`Array<class_Array>` input_vars, :ref:`Array<class_Array>` output_vars, :ref:`int<class_int>` mode, :ref:`int<class_int>` type **)** |virtual| |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>` | :ref:`_get_description<class_VisualShaderNodeCustom_method__get_description>` **(** **)** |virtual|                                                                                                                       |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>` | :ref:`_get_global_code<class_VisualShaderNodeCustom_method__get_global_code>` **(** :ref:`int<class_int>` mode **)** |virtual|                                                                                            |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`       | :ref:`_get_input_port_count<class_VisualShaderNodeCustom_method__get_input_port_count>` **(** **)** |virtual|                                                                                                             |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>` | :ref:`_get_input_port_name<class_VisualShaderNodeCustom_method__get_input_port_name>` **(** :ref:`int<class_int>` port **)** |virtual|                                                                                    |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`       | :ref:`_get_input_port_type<class_VisualShaderNodeCustom_method__get_input_port_type>` **(** :ref:`int<class_int>` port **)** |virtual|                                                                                    |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>` | :ref:`_get_name<class_VisualShaderNodeCustom_method__get_name>` **(** **)** |virtual|                                                                                                                                     |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`       | :ref:`_get_output_port_count<class_VisualShaderNodeCustom_method__get_output_port_count>` **(** **)** |virtual|                                                                                                           |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>` | :ref:`_get_output_port_name<class_VisualShaderNodeCustom_method__get_output_port_name>` **(** :ref:`int<class_int>` port **)** |virtual|                                                                                  |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`       | :ref:`_get_output_port_type<class_VisualShaderNodeCustom_method__get_output_port_type>` **(** :ref:`int<class_int>` port **)** |virtual|                                                                                  |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`int<class_int>`       | :ref:`_get_return_icon_type<class_VisualShaderNodeCustom_method__get_return_icon_type>` **(** **)** |virtual|                                                                                                             |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| :ref:`String<class_String>` | :ref:`_get_subcategory<class_VisualShaderNodeCustom_method__get_subcategory>` **(** **)** |virtual|                                                                                                                       |
+-----------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

方法说明
--------

.. _class_VisualShaderNodeCustom_method__get_category:

- :ref:`String<class_String>` **_get_category** **(** **)** |virtual|

重写此方法，在可视化着色器编辑器的成员对话框中定义相关自定义节点的类别。路径可能看起来像 ``"MyGame/MyFunctions/Noise"``\ 这样。

定义这个方法是\ **可选的**\ 。如果未重写，该节点将被归入 "Custom" 自定义类别。

----

.. _class_VisualShaderNodeCustom_method__get_code:

- :ref:`String<class_String>` **_get_code** **(** :ref:`Array<class_Array>` input_vars, :ref:`Array<class_Array>` output_vars, :ref:`int<class_int>` mode, :ref:`int<class_int>` type **)** |virtual|

重写此方法来定义相关自定义节点的实际着色器代码。着色器代码应该以字符串的形式返回，可以有多行，为了方便，可以使用\ ``""``\ 多行字符串结构。

\ ``input_vars``\ 和\ ``output_vars``\ 数组包含各种输入和输出变量的字符串名称，正如本类中\ ``_get_input_*``\ 和\ ``_get_output_*``\ 虚方法所定义的。

输出端口可以在着色器代码中被分配值。例如，\ ``return output_vars[0] + " = " + input_vars[0] + ";"``\ 。

你可以根据着色器\ ``mode``\ （参阅\ :ref:`Mode<enum_Shader_Mode>`\ ）和/或\ ``type``\ （参阅\ :ref:`Type<enum_VisualShader_Type>`\ ）来定制生成的代码。

定义这个方法是\ **required**\ 必须的。

----

.. _class_VisualShaderNodeCustom_method__get_description:

- :ref:`String<class_String>` **_get_description** **(** **)** |virtual|

重写此方法来定义可视化着色器编辑器的成员对话框中的相关自定义节点的描述。

定义这个方法是\ **optional**\ 可选的。

----

.. _class_VisualShaderNodeCustom_method__get_global_code:

- :ref:`String<class_String>` **_get_global_code** **(** :ref:`int<class_int>` mode **)** |virtual|

重写此方法，在全局着色器之上添加着色器代码，以定义你自己的可重用方法、变量、常量、uniform等的标准库。着色器代码应以字符串的形式返回，可以有多行，为了方便，可以使用\ ``""``\ 多行字符串结构。

要小心使用这个功能，因为它可能导致与其他自定义节点的名称冲突，所以一定要给定义的实体起唯一的名字。

你可以根据着色器\ ``mode``\ 来定制生成的代码，参阅\ :ref:`Mode<enum_Shader_Mode>`\ 。

定义这个方法是\ **optional**\ 可选的。

----

.. _class_VisualShaderNodeCustom_method__get_input_port_count:

- :ref:`int<class_int>` **_get_input_port_count** **(** **)** |virtual|

重写此方法来定义相关自定义节点的输入端口数量。

定义这个方法是\ **required**\ 必须的。如果没有被重写，节点就没有输入端口。

----

.. _class_VisualShaderNodeCustom_method__get_input_port_name:

- :ref:`String<class_String>` **_get_input_port_name** **(** :ref:`int<class_int>` port **)** |virtual|

重写此方法来定义相关自定义节点的输入端口的名称。这些名称既用于编辑器中的输入槽，也作为着色器代码中的标识符，并在\ :ref:`_get_code<class_VisualShaderNodeCustom_method__get_code>`\ 中的\ ``input_vars``\ 数组中传递。

定义这个方法是\ **可选的**\ ，但推荐使用。如果没有被重写，输入端口被命名为\ ``"in"+str(port)``\ 。

----

.. _class_VisualShaderNodeCustom_method__get_input_port_type:

- :ref:`int<class_int>` **_get_input_port_type** **(** :ref:`int<class_int>` port **)** |virtual|

重写此方法以定义相关自定义节点的每个输入端口的返回类型，参阅\ :ref:`PortType<enum_VisualShaderNode_PortType>`\ 的可能类型。

定义这个方法是\ **可选的**\ ，但推荐使用。如果没有被重写，输入端口将返回 :ref:`VisualShaderNode.PORT_TYPE_SCALAR<class_VisualShaderNode_constant_PORT_TYPE_SCALAR>` 类型。

----

.. _class_VisualShaderNodeCustom_method__get_name:

- :ref:`String<class_String>` **_get_name** **(** **)** |virtual|

重写此方法来定义可视化着色器编辑器的成员对话框和图中的相关自定义节点的名称。

定义这个方法是\ **可选的**\ ，但推荐使用。如果不重写，节点将被命名为 "Unnamed"。

----

.. _class_VisualShaderNodeCustom_method__get_output_port_count:

- :ref:`int<class_int>` **_get_output_port_count** **(** **)** |virtual|

重写此方法来定义相关自定义节点的输出端口数量。

定义这个方法是\ **必须的**\ 。如果不重写，节点就没有输出端口。

----

.. _class_VisualShaderNodeCustom_method__get_output_port_name:

- :ref:`String<class_String>` **_get_output_port_name** **(** :ref:`int<class_int>` port **)** |virtual|

重写此方法来定义相关自定义节点的输出端口的名称。这些名字既用于编辑器中的输出槽，也作为着色器代码中的标识符，并在\ :ref:`_get_code<class_VisualShaderNodeCustom_method__get_code>`\ 中的\ ``output_vars``\ 数组中传递。

定义这个方法是\ **可选的**\ ，但推荐使用。如果没有被重写，输出端口被命名为\ ``"out" + str(port)``\ 。

----

.. _class_VisualShaderNodeCustom_method__get_output_port_type:

- :ref:`int<class_int>` **_get_output_port_type** **(** :ref:`int<class_int>` port **)** |virtual|

重写此方法以定义相关自定义节点的每个输出端口的返回类型，参阅\ :ref:`PortType<enum_VisualShaderNode_PortType>`\ 的可能类型。

定义这个方法是\ **可选的**\ ，但推荐使用。如果没有被重写，输出端口将返回\ :ref:`VisualShaderNode.PORT_TYPE_SCALAR<class_VisualShaderNode_constant_PORT_TYPE_SCALAR>`\ 类型。

----

.. _class_VisualShaderNodeCustom_method__get_return_icon_type:

- :ref:`int<class_int>` **_get_return_icon_type** **(** **)** |virtual|

重写此方法来定义可视化着色器编辑器的成员对话框中相关自定义节点的返回图标。

定义这个方法是\ **可选的**\ 。如果不重写，就不会显示返回图标。

----

.. _class_VisualShaderNodeCustom_method__get_subcategory:

- :ref:`String<class_String>` **_get_subcategory** **(** **)** |virtual|

重写此方法来定义可视化着色器编辑器的成员对话框中相关自定义节点的子类别。

定义这个方法是\ **可选的**\ 。如果不重写，节点将被归入主类别的根下，参阅\ :ref:`_get_category<class_VisualShaderNodeCustom_method__get_category>`\ 。

.. |virtual| replace:: :abbr:`virtual (This method should typically be overridden by the user to have any effect.)`
.. |const| replace:: :abbr:`const (This method has no side effects. It doesn't modify any of the instance's member variables.)`
.. |vararg| replace:: :abbr:`vararg (This method accepts any number of arguments after the ones described here.)`
